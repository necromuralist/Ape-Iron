#+TITLE: Set Up
This is where we set up the game, the game being One Day at a Thyme (postapocalypso.itch.io), which is a journaling game in which you write down whatever happend to you on a given day. The location and kind of experience are chosen at the beginning of the game and then after you write each day the cards are dealt out to give you a new set of things to write about.

#+begin_src python :tangle setup.py
<<imports>>

<<get>>

<<location>>

<<experience>>

<<cards>>

<<play>>
#+end_src
* Imports
#+begin_src python :noweb-ref imports
# from python
from pathlib import Path
import random

# from pypi
import click
#+end_src
* Get
#+begin_src python :noweb-ref get
NEWLINE = "\n"
CWD = Path.cwd()

def get(filename) -> list:
    """Opens the file and splits it into a list
    
    Args:
     filename: text file to read
    
    Returns:
     the lines of the file in a list
    """
    with open(filename) as reader:
        lines = reader.read().split(NEWLINE)
    return lines    
#+end_src  
* Location
  The location is where your cottage is located. So you only need to pull it once per game.
#+begin_src python :noweb-ref location
def location() -> str:
    """Get the location"""
    with open("locations.txt") as reader:
        place = random.choice(reader.read().split("\n"))
    return place
#+end_src
* Experience
#+begin_src python :noweb-ref experience
def experience() -> str:
    """Get the experience

    Returns:
     the experience you had with the cards
    """
    return random.choice((
        "A mystery, dilemma, or conflict",
        "An unexpected encounter",
        "A planned encounter"
    ))
#+end_src  
* Cards
  These are activities, items, neighbors and events that you might encounter each day.
#+begin_src python :noweb-ref cards
def deal_cards() -> list:
    """Deal out some daily cards"""
    count = random.randint(1, 6)
    activities = get("activities.txt")
    items = get("items.txt")
    neighbors = get("neighbors.txt")
    events = get("events.txt")
    return random.sample(activities + items + neighbors + events, count)
#+end_src
* Play
#+begin_src python :noweb-ref play
@click.command()
@click.option("--restart", default=True, help="Restart the location and experience.")
def one_day_at_a_thyme(restart: bool):
    if restart:
        print(f"Location: {location()}")
        print(f"Experience: {experience()}")
    for item in deal_cards():
        print(f" - {item}")
    return
#+end_src  

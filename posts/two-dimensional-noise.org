#+BEGIN_COMMENT
.. title: Two-Dimensional Noise
.. slug: two-dimensional-noise
.. date: 2023-05-14 15:41:16 UTC-07:00
.. tags: nature of code,p5.js,noise
.. category: Noise
.. link: 
.. description: Graphing p5.js noise on two-dimensions.
.. type: text
.. status: 
.. updated: 
.. template: p5.tmpl
#+END_COMMENT
#+OPTIONS: ^:{}
#+TOC: headlines 3

* Introduction
This is yet another copy and redo of a sketch from [[https://nature-of-code-2nd-edition.netlify.app/][the Nature of Code]]. This time it's an extension of a prior post on {{% lancelot title="making a one-dimensional noise graph" %}}graphing-p5-noise{{% /lancelot %}}.

* Static Version (Using Set)

{{% javascripttag source="noise-plotter.js" %}}
{{% p5div source="simple-sketch.js" divid="simple-2d-noise-graph" %}}

#+begin_src js :tangle ../files/posts/two-dimensional-noise/simple-sketch.js  :exports none
function simple_sketch(p5) {
  p5.setup = function() {
    p5.createCanvas(1000, 400);
  } //end setup

  p5.draw = function() {
    p5.loadPixels();
    let offset_x = 0.0;

    for (let x = 0; x < p5.width; x++) {
      let offset_y = 0.0;

      for (let y = 0; y < p5.height; y++) {
        let brightness = p5.noise(offset_x, offset_y) * 255
        p5.set(x, y, p5.floor(brightness));
        offset_y += 0.01;
      } //end y-for
      offset_x += 0.01;
    } // end x-for

    p5.updatePixels();
    p5.noLoop();
  } // end draw
}// end simple_sketch


new p5(simple_sketch, "simple-2d-noise-graph");
#+end_src

* Static Version Setting Pixels
{{% p5div source="static-sketch-pixels.js" divid="static-2d-noise-graph-pixels" %}}

*Note for later:* You have to either set the background or the alpha channel in the pixel array. Leaving both out won't show anything.

#+begin_src js :tangle ../files/posts/two-dimensional-noise/static-sketch-pixels.js :exports none
/** Draw static 2D noise using pixel array*/
function static_pixels(p5) {
  const WIDTH = 1000;
  const HEIGHT = 400;

  let plotter;

  /** creates the canvas */
  p5.setup = function() {
    p5.pixelDensity(1);
    p5.createCanvas(WIDTH, HEIGHT);
    plotter = new NoisePlotter(p5);
  } // end setup

  /** draw the noise */
  p5.draw = function() {
    plotter.draw();
    p5.noLoop();
  } // end draw

} // end static_pixels

new p5(static_pixels, "static-2d-noise-graph-pixels");
#+end_src

** Noise Plotter

#+begin_src js :tangle ../files/posts/two-dimensional-noise/noise-plotter.js
class NoisePlotter {
  constructor(p5, offset_increment=0.01) {
    this.p5 = p5
    this.offset_increment = offset_increment;
  } // end constructur

  draw() {
    let offset_y = 0;
    let offset_x;
    let pixel_index;
    let intensity;
    
    this.p5.loadPixels();

    for (let y=0; y < this.p5.height; y++) {
      offset_x = 0;
      for (let x=0; x < this.p5.width; x++) {
        pixel_index = (x + y * this.p5.width) * this.CELLS_PER_PIXEL;
        intensity = this.p5.noise(offset_x, offset_y) * this.RGB_MAX;
        this.p5.pixels[pixel_index + this.RED] = intensity;
        this.p5.pixels[pixel_index + this.GREEN] = intensity;
        this.p5.pixels[pixel_index + this.BLUE] = intensity;
        this.p5.pixels[pixel_index + this.ALPHA] = this.RGB_MAX;
        offset_x += this.offset_increment;        
      } // end x for
      offset_y += this.offset_increment;
    }// end x for
    this.p5.updatePixels();
  } // end draw
} // end NoisePlotter

NoisePlotter.prototype.RED = 0;
NoisePlotter.prototype.GREEN = 1;
NoisePlotter.prototype.BLUE = 2;
NoisePlotter.prototype.ALPHA = 3;
NoisePlotter.prototype.CELLS_PER_PIXEL = 4;
NoisePlotter.prototype.RGB_MAX = 255;
#+end_src

#+begin_src js :noweb-ref noise-plotter-class
#+end_src
* Sources

- Nature of Code [Internet]. [cited 2023 May 11]. Available from: https://nature-of-code-2nd-edition.netlify.app/
- p5 reference | pixelDensity() [Internet]. [cited 2023 May 15]. Available from: https://p5js.org/reference/#/p5/pixelDensity
- p5 reference | pixels [Internet]. [cited 2023 May 15]. Available from: https://p5js.org/reference/#/p5/pixels
- pixel | Etymology, origin and meaning of pixel by etymonline [Internet]. [cited 2023 May 16]. Available from: https://www.etymonline.com/word/pixel
- Pixel density - Wikipedia [Internet]. [cited 2023 May 16]. Available from: https://en.wikipedia.org/w/index.php?title=Pixel_density&useskin=vector
- Uint8ClampedArray - JavaScript | MDN [Internet]. 2023 [cited 2023 May 16]. Available from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray

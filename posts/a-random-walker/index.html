<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="A random walk with p5." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>A Random Walk(er) | Ape Iron</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Ape-Iron/posts/a-random-walker/" rel="canonical"><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><!-- favicons -->
<link href="../../apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="../../favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="../../favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="../../site.webmanifest" rel="manifest">
<meta content="Cloistered Monkey" name="author">
<link href="../graphing-p5-noise/" rel="prev" title="Graphing P5 Noise" type="text/html">
<link href="../a-noisy-walker/" rel="next" title="A Noisy Walker" type="text/html">
<meta content="Ape Iron" property="og:site_name">
<meta content="A Random Walk(er)" property="og:title">
<meta content="https://necromuralist.github.io/Ape-Iron/posts/a-random-walker/" property="og:url">
<meta content="A random walk with p5." property="og:description">
<meta content="article" property="og:type">
<meta content="2023-05-09T13:07:44-07:00" property="article:published_time">
<meta content="nature of code" property="article:tag">
<meta content="p5" property="article:tag">
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="../../"><span id="blog-title">Ape Iron</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../../rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Ape-Iron/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"><input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href=".">A Random Walk(er)</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">Cloistered Monkey</span></p>
<p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2023-05-09T13:07:44-07:00" itemprop="datePublished" title="2023-05-09 13:07">2023-05-09 13:07</time></a></p>
<p class="sourceline"><a class="sourcelink" href="index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<p>
<script language="javascript" src="walker.js" type="text/javascript"></script>
<script language="javascript" src="sketch.js" type="text/javascript"></script></p>
<div id="random-walker-sketch"></div>
<p>This is a look at the <a href="https://thecodingtrain.com/tracks/the-nature-of-code-2/noc/1-vectors/1-what-is-a-vector">What Is A Vector</a> lesson on The Coding Train, part of the Nature of Code series. It's used in the series to show how to use vectors instead of object properties (e.g. maintaining and updating <code>this.x</code> and <code>this.y</code>) to hold the position of an object on the canvas.</p>
<p>I'm going to illustrate this by creating an object that takes a <a href="https://en.wikipedia.org/wiki/Random_walk?useskin=vector">random walk</a>.</p>
<div class="outline-2" id="outline-container-org654b3a8">
<h2 id="org654b3a8">The Walker</h2>
<div class="outline-text-2" id="text-org654b3a8">
<p>First up is a Walker class that keeps track of its position on the canvas, updates the position, and draws itself. I'm thinking that drawing itself doesn't seem right, but I suppose since we're only creating one object moving the drawing outside of the class is more work than what's needed.</p>
</div>
<div class="outline-3" id="outline-container-orgf2a40b4">
<h3 id="orgf2a40b4">The Constructor</h3>
<div class="outline-text-3" id="text-orgf2a40b4">
<div class="highlight">
<pre><span></span><span class="cm">/** The Random Walker */</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Walker</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/** Create the walker</span>
<span class="cm">   * @param {integer}: x - x-coordinate</span>
<span class="cm">   * @param {integer}: y - y-coordinate</span>
<span class="cm">   * @param {number}: limit - minimum and maximum for the random</span>
<span class="cm">   * @param {integer}: p5 - p5 instance</span>

<span class="cm">   * As a side effect uses x and y to create `this.position`, a vector</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="p">,</span><span class="w"> </span><span class="nx">p5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createVector</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">limit</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end constructor</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org4350bec">
<h3 id="org4350bec">The Step Property</h3>
<div class="outline-text-3" id="text-org4350bec">
<p>In the Coding Train video he increments the coordinates of the position vector separately, but since this is supposed to be about vectors I thought it should add another vector. This one was a little bit of a head-scratcher at first, though. <code>p5</code> will make a two-dimensional vector for you with the x and y values set to some random value from -1 to 1 (it's a unit vector set to a random angle) using <a href="https://p5js.org/reference/#/p5.Vector/random2D">p5.Vector.random2D</a>. But the <code>p5</code> we need to use isn't our <code>p5</code> but rather the global p5 object. The <code>p5</code> instance we hold doesn't have the <code>Vector</code> class definition, for some reason (which is why you need to use <code>createVector</code> I guess).</p>
<p>Since the random values are from -1 to 1 I'm multiplying it by a user-specified integer to get a bigger step.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** The next random step</span>
<span class="cm">    @returns: p5.Vector</span>
<span class="cm">*/</span>
<span class="nx">get</span><span class="w"> </span><span class="nx">next_step</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">random2D</span><span class="p">().</span><span class="nx">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end get next_step</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org5f35ae1">
<h3 id="org5f35ae1">The Update Method</h3>
<div class="outline-text-3" id="text-org5f35ae1">
<p>It would have been nice if p5 vectors could be added using operators, but instead we need to use the <code>add</code> method. Weirdly, <a href="https://p5js.org/reference/#/p5.Vector/add">the Vector.add documentation</a> doesn't cover the case where you pass a vector to another vector's <code>add</code> method, only the cases where you're adding the arguments separately, adding an array of values, or adding two vectors using the <code>p5.Vector.add</code> static method. It appears to do an in-place update, though, so I'll assume that that's what it does.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Add the ~next_step~ vector to the ~position~ vector, updating in-place */</span>
<span class="nx">update</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">next_step</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end update</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgf51cf10">
<h3 id="orgf51cf10">The Show Method</h3>
<div class="outline-text-3" id="text-orgf51cf10">
<p>This is where the walker draws itself. Even though we're using a vector to hold the position, you still need to unpack the coordinates when calling the <code>point</code> method.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Draw the position as a point */</span>
<span class="nx">show</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">strokeWeight</span><span class="p">(</span><span class="mf">5</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end show</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org01bd2a1">
<h3 id="org01bd2a1">Move and Show</h3>
<div class="outline-text-3" id="text-org01bd2a1">
<p>Not really needed, but I'd rather make one function call for the user to move the walker and have it draw itself.</p>
<div class="highlight">
<pre><span></span><span class="cm">/**Convenience method to call ~update~ and ~show~ */</span>
<span class="nx">move_and_show</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end move_and_show</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org07d46ea">
<h2 id="org07d46ea">The Sketch</h2>
<div class="outline-text-2" id="text-org07d46ea">
<p>Now the sketch. It seems a little awkward, but since the Walker definition is in a separate file from the sketch definition we need to remember add a <code>script</code> tag to the HTML for both of them. I guess you can think of that as the equivalent of an import, although it feels weird somehow.</p>
</div>
<div class="outline-3" id="outline-container-org09a516e">
<h3 id="org09a516e">Some Constants</h3>
<div class="outline-text-3" id="text-org09a516e">
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">WALKER_SKETCH_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"random-walker-sketch"</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">400</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">STEP_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WHITE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">255</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgde941dc">
<h3 id="orgde941dc">The Sketch Function</h3>
<div class="outline-text-3" id="text-orgde941dc">
<p>Nothing fancy here, we're just declaring the function and the <code>walker</code> variable to hold our Walker object.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Sketch of a Random Walk */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">random_walk</span><span class="p">(</span><span class="nx">p5js</span><span class="p">){</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">walker</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org964aef0">
<h3 id="org964aef0">Set Up</h3>
<div class="outline-text-3" id="text-org964aef0">
<p>Set up the sketch by drawing the canvas and creating a Walker.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Initial setup of the canvas and Walker */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span>
<span class="w">      </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">WALKER_SKETCH_DIV</span><span class="p">).</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="p">);</span>
<span class="w">  </span><span class="nx">walker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Walker</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">STEP_LIMIT</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="nx">WHITE</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end setup</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org69c5a09">
<h3 id="org69c5a09">Draw</h3>
<div class="outline-text-3" id="text-org69c5a09">
<p>Our <code>draw</code> function defers to the walker to do everything.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Draw a frame */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">walker</span><span class="p">.</span><span class="nx">move_and_show</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end draw</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org96bef6c">
<h2 id="org96bef6c">The End</h2>
<div class="outline-text-2" id="text-org96bef6c">
<p>And there it is. One thing to note is that there's no checking of the position to see if it's wandered off the canvas so it's possible that it will wander completely off and updates won't be visible.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgc249726">
<h2 id="orgc249726">Sources</h2>
<div class="outline-text-2" id="text-orgc249726"></div>
<div class="outline-3" id="outline-container-orgd6f317f">
<h3 id="orgd6f317f">The Coding Train</h3>
<div class="outline-text-3" id="text-orgd6f317f">
<ul class="org-ul">
<li>What is a Vector? [Internet]. [cited 2023 May 9]. Available from: <a href="https://thecodingtrain.com">https://thecodingtrain.com</a></li>
</ul>
</div>
</div>
<div class="outline-3" id="outline-container-org30d44a4">
<h3 id="org30d44a4">P5 Reference</h3>
<div class="outline-text-3" id="text-org30d44a4">
<ul class="org-ul">
<li>P5 reference | createVector() [Internet]. [cited 2023 May 9]. Available from: <a href="https://p5js.org/reference/#/p5/createVector">https://p5js.org/reference/#/p5/createVector</a></li>
<li>P5 reference | p5.Vector [Internet]. [cited 2023 May 9]. Available from: <a href="https://p5js.org/reference/#/p5.Vector">https://p5js.org/reference/#/p5.Vector</a></li>
</ul>
</div>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../categories/nature-of-code/" rel="tag">nature of code</a></li>
<li><a class="tag p-category" href="../../categories/p5/" rel="tag">p5</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../graphing-p5-noise/" rel="prev" title="Graphing P5 Noise">Previous post</a></li>
<li class="next"><a href="../a-noisy-walker/" rel="next" title="A Noisy Walker">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Contents © 2023 Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a href="https://necromuralist.github.io/Ape-Iron/" property="dct:title" rel="cc:attributionURL">Ape Iron</a> by <a href="https://github.com/necromuralist" property="cc:attributionName" rel="cc:attributionURL dct:creator">The Cloistered Monkey</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY 4.0<img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" style="height:22px!important;margin-left:3px;vertical-align:text-bottom;"></a></p>
</footer>
</div>
</div>
<script src="../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script>
</body>
</html>

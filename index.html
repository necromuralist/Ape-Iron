<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Ironies of the Ape." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Ape Iron</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Ape-Iron/index.html" rel="canonical">
<link href="index-2.html" rel="next" type="text/html"><!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><!-- favicons -->
<link href="apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
<link href="favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
<link href="favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
<link href="site.webmanifest" rel="manifest">
<link href="posts/cucumber-and-ecma-script-modules-esm/index.html" rel="prefetch" type="text/html">
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="."><span id="blog-title">Ape Iron</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach Pig Thigh & Rump</a> <a class="dropdown-item" href="https://necromuralist.github.io/Bowling-For-Data/">Bowling For Data</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Ape-Iron/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" type="text"><input style="visibility: hidden;display:none" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<div class="postindex">
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/cucumber-and-ecma-script-modules-esm/index.html">Cucumber and Ecma Script Modules (ESM) In a Nikola Post</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/cucumber-and-ecma-script-modules-esm/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-15T16:21:32-07:00" itemprop="datePublished" title="2023-06-15 16:21">2023-06-15 16:21</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org148b44f">What Is This, Then?</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#orgc49db0a">Setting Up</a>
<ul>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org2a68787">The Cucumber.js Configuration</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org9e96e13">The Testing package.json</a></li>
</ul>
</li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org838f4df">The Test Files</a>
<ul>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org1504487">The Feature File</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#orgf64b109">The Test Steps</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#orge78ec02">The Imports</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org422ceea">Given</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org8b26654">When</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org6c19963">Then</a></li>
</ul>
</li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org37279e7">The Greeter</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org3184112">The Greeter package.json</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#orgf0dafc7">Now the Other Hard Part</a>
<ul>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org1e3a50f">First Let's Setup the Sketch Tag</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org1d84485">Now Let's Use It</a></li>
</ul>
</li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org3ebf1e9">What Have We Learned?</a></li>
<li><a href="posts/cucumber-and-ecma-script-modules-esm/index.html#org405b2d8">Links</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org148b44f">
<h2 id="org148b44f">What Is This, Then?</h2>
<div class="outline-text-2" id="text-org148b44f">
<p>This is a re-do of the cucumber.js example testing for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">JavaScript/ECMAScript Modules (ESM)</a>. Just copying the files exactly as they're given in the <a href="https://github.com/cucumber/cucumber-js-examples">cucumber.js github repository</a> works pretty much without problem, but since I'm doing this messy thing with writing javascript in these blog posts instead of as part of a code-project, it took a little more work than I would have liked.</p>
<p>I had <a href="posts/bdd-testing-p5/index.html">previously tried</a> to get ESM modules to work with <a href="https://mochajs.org/">mocha</a> but gave up and went back to using the <a href="https://en.wikipedia.org/wiki/CommonJS?useskin=vector">CommonJS</a> syntax instead (which I just read is meant to work outside the brouwser and not in it, which explains some of the trouble I ran into). This time I seem to have gotten the ESM style of modules working with <a href="https://cucumber.io/docs/installation/javascript/">cucumber.js</a>, but it \(\textit{is}\) a bit convoluted and maybe not really a good idea to do it this way. So here we go.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgc49db0a">
<h2 id="orgc49db0a">Setting Up</h2>
<div class="outline-text-2" id="text-orgc49db0a">
<p>The cucumber.js page has instructions on installing it, so I won't go over it. It's mostly just <code>npm install cucumber --save-dev</code>. I seem to remember that they said somewhere not to install it globally, but I can't remember now where I saw it. Once I installed it, I had to edit a couple of files to get it working the way I wanted it to.</p>
</div>
<div class="outline-3" id="outline-container-org2a68787">
<h3 id="org2a68787">The Cucumber.js Configuration</h3>
<div class="outline-text-3" id="text-org2a68787">
<p><code>cucumber.js</code> uses a configuration file named… <code>cucumber.js</code> that you put where you run the tests. I'm going to put cucumber test-files into folders whose names will have the form <code>test-&lt;slug&gt;</code>, where <code>slug</code> is the slug for the post where I define the javascript and tests in, so in order to get <code>cucumber</code> to find them, I need to change the glob in the <code>import</code> line to match.</p>
<div class="highlight">
<pre><span></span><span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">import</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">'test*/**/*.js'</span><span class="p">],</span>
<span class="w">    </span><span class="nx">publishQuiet</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
<p>This file is using the ESM syntax (using an <code>export</code> statement) instead of the CJS form of setting <code>module.export</code>. We're going to have to make all the code match the ESM form, mixing and matching causes cucumber to crash throwing errors saying it was expecting an ESM module.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org9e96e13">
<h3 id="org9e96e13">The Testing package.json</h3>
<div class="outline-text-3" id="text-org9e96e13">
<p>Next we need a <code>package.json</code> file next to the <code>cucumber.js</code> file. There's two changes I made.</p>
<ul class="org-ul">
<li><code>"type": "module"</code> tells cucumber (or node?) that we'll be using ESM, not CJS</li>
<li>I'm running it with <a href="https://nodemon.io/">nodemon</a> so the "test" attribute gets the command to run and its arguments.</li>
</ul>
<div class="highlight">
<pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">"type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"module"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"private"</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"scripts"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"test"</span><span class="o">:</span><span class="w"> </span><span class="s2">"nodemon --watch . --exec cucumber-js ./test*"</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s2">"devDependencies"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"@cucumber/cucumber"</span><span class="o">:</span><span class="w"> </span><span class="s2">"^9.1.2"</span><span class="p">,</span>
<span class="w">    </span><span class="s2">"chai"</span><span class="o">:</span><span class="w"> </span><span class="s2">"^4.3.7"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>I had previously installed <code>chai</code> globally and it was working with <code>mocha</code> but for mysterious reasons this time I got a "Module not found" error (maybe because I installed <code>cucumber</code> locally) so I installed it locally too.</p>
<p>So far, this is what I've edited in the testing directory.</p>
<pre class="example" id="orgc8ae248">
cucumber.js
package.json
</pre>
<p>There's also a <code>package-lock.json</code> and <code>node_modules/</code> which were created as part of installing <code>cucumber</code> and <code>chai</code> but I don't touch those.</p>
<p>Now that we have this setup we can run the test-runner using <code>npm</code>.</p>
<pre class="example" id="org831b88e">
npm test
</pre>
<p>Cucumber runs once and then will re-run the testing every time we make a change to our files. I'm not sure how the magic gets done but it even detects when I make changes to the javascript being tested after I moved it outside of the testing folder.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org838f4df">
<h2 id="org838f4df">The Test Files</h2>
<div class="outline-text-2" id="text-org838f4df">
<p>The slug for this post is <code>cucumber-and-ecma-script-modules-esm</code> so the testing files are going into a folder named <code>test-cucumber-and-ecma-script-modules-esm</code> which sits next to the <code>cucumber.js</code> files and the <code>package.json</code> files that I just mentioned.</p>
</div>
<div class="outline-3" id="outline-container-org1504487">
<h3 id="org1504487">The Feature File</h3>
<div class="outline-text-3" id="text-org1504487">
<p>We're going to make a Greeter class that does one thing: greets users. Cucumber will look for files that have the <code>.feature</code> file extension and parse the keywords to figure out what tests to expect. Here's the one for our greeter (in the file <code>greetings.feature</code>).</p>
<div class="highlight">
<pre><span></span><span class="k">Feature:</span><span class="nf"> Greeting</span>

<span class="k">Scenario:</span><span class="nf"> The Greeter Greets</span>

<span class="k">Given </span><span class="nf">a greeter</span>
<span class="k">When </span><span class="nf">the greeter greets me</span>
<span class="k">Then </span><span class="nf">I should hear "</span><span class="s">Go away.</span><span class="nf">"</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgf64b109">
<h3 id="orgf64b109">The Test Steps</h3>
<div class="outline-text-3" id="text-orgf64b109">
<p>Now that we have a feature file we have to write the tests that match it. In our feature file we used three special keywords - <code>Given</code>, <code>When</code> and <code>Then</code> - which have to match functions in our test file to pass the cucumber tests, which I'll put in a file called <code>steps.js</code>. In the example code they put it in a folder named <code>steps</code>, which makes sense if you have more than one folder but this'll do for now.</p>
</div>
</div>
<div class="outline-3" id="outline-container-orge78ec02">
<h3 id="orge78ec02">The Imports</h3>
<div class="outline-text-3" id="text-orge78ec02">
<p>These are the ESM style imports. The <code>Greeter</code> import statement is long because it's in a file accessible to this post rather than being next to the test-code so I have to pass in the path relative to where the <code>steps.js</code> file is.</p>
<div class="highlight">
<pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">expect</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"chai"</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Given</span><span class="p">,</span><span class="w"> </span><span class="nx">When</span><span class="p">,</span><span class="w"> </span><span class="nx">Then</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@cucumber/cucumber"</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w">  </span><span class="s2">"../../../files/posts/cucumber-and-ecma-script-modules-esm/greetings.js"</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org422ceea">
<h3 id="org422ceea">Given</h3>
<div class="outline-text-3" id="text-org422ceea">
<p>Our <code>given</code> function just creates a Greeter instance. There are also functions like <code>Before</code> and <code>BeforeAll</code> that let you do something once befare each Scenario (or all Scenarios), but we only have one scenario and it sounds clearer to me to say "Given a greeter…".</p>
<div class="highlight">
<pre><span></span><span class="nx">Given</span><span class="p">(</span><span class="s2">"a greeter"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">greeter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Greeter</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org8b26654">
<h3 id="org8b26654">When</h3>
<div class="outline-text-3" id="text-org8b26654">
<p>Our <code>when</code> calls the <code>greetings</code> method and saves the output so we can check it in our <code>Then</code> function.</p>
<div class="highlight">
<pre><span></span><span class="nx">When</span><span class="p">(</span><span class="s2">"the greeter greets me"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">is_what_i_heard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">greeter</span><span class="p">.</span><span class="nx">greetings</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org6c19963">
<h3 id="org6c19963">Then</h3>
<div class="outline-text-3" id="text-org6c19963">
<p>Our last function is interesting in that it uses what they call <a href="https://github.com/cucumber/cucumber-expressions#readme">cucumber-expressions</a>, which allow you to put types into the string definition to tell it what to look for in the feature definition so we don't have to set the exact value. In this case our feature file says <code>Then I should hear "Go away."</code> The end of the statement is in quotes so cucumber knows that it's a string so we can replace it with <code>{string}</code> when we define the function and cucumber will pass in the expected string as an argument to the function that we pass to the <code>Then</code> function. Then we can use the passed-in value rather than hard-coding the expected string into our test. In this case the parameter <code>what_he_should_have_said</code> will have the string "Go away." in it, extracted (without the quotes) from our feature file definition.</p>
<div class="highlight">
<pre><span></span><span class="nx">Then</span><span class="p">(</span><span class="s2">"I should hear {string}"</span><span class="p">,</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">what_he_should_have_said</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">is_what_i_heard</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">what_he_should_have_said</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
<p>So far this is the basic structure of our testing folder (ignoring stuff that I didn't create or edit).</p>
<pre class="example" id="org3b23798">
cucumber.js
package.json
test-cucumber-and-ecma-script-modules-esm/
  greetings.feature
  steps.js
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org37279e7">
<h2 id="org37279e7">The Greeter</h2>
<div class="outline-text-2" id="text-org37279e7">
<p>Based on our test, this is what our Greeter class should look like.</p>
<p><img alt="nil" src="posts/cucumber-and-ecma-script-modules-esm/greeter.png"></p>
<p>Now let's define the Greeter (the software under test). Initially, just to see if it worked, I put it next to the test files the way that the example did, but the point of this is to get the javascript into the post so we can work with P5, so its final resting place is in a file named <code>greetings.js</code> in the folder where <a href="https://getnikola.com/">nikola</a> will look for files when I build the site.</p>
<div class="highlight">
<pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">greetings</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s2">"Go away."</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">};</span>
</pre></div>
<p>In order for the class-definition (or anything else we define) to be importable elsewhere we have to declare it exportable. In the example code they used the syntax:</p>
<div class="highlight">
<pre><span></span><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">{</span>
</pre></div>
<p>when defining the class, but, as seems to be the way with javascript, there's multiple ways to do exports (and imports), each of which probably has some subtle different use, but which is more than I want to know about at this point, so I decided to settle on this syntax:</p>
<div class="highlight">
<pre><span></span><span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">};</span>
</pre></div>
<p>(making a separate export line at the bottom of the file) for two reasons:</p>
<ul class="org-ul">
<li>If you have multiple things to export you can put them all in the curly braces so it's in one statement instead of scattered around the file</li>
<li>This leaves class definitions looking the same as they did before I decided to try messing with modules.</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org3184112">
<h2 id="org3184112">The Greeter package.json</h2>
<div class="outline-text-2" id="text-org3184112">
<p>This next bit took me a while to figure out. If you put the <code>Greeter</code> definition into a subfolder below where we're running the tests, it will recognize our <code>greeter.js</code> file as an ESM module just fine. But, if you move it into a folder outside our tests as I did, node (or cucumber) suddenly won't be able to tell that it's an ESM module.</p>
<p>It will helpfully tell you to change the file extension from <code>.js</code> to <code>.mjs</code>, which doesn't work, and offer you a different import syntax to use, which also doesn't work, and to tell you to put <code>"type": "module"</code> into the <code>package.json</code> file… which turns out to <i>sort of</i> be the answer.</p>
<p>If you look at the <code>package.json</code> I edited in the section above to run the tests you'll see that it already has the <code>"type": "module"</code> line in it, which I assume is why the tests were running before I moved <code>greetings.js</code>. But it turns out that to get the tests to recognize the <code>greetings.js</code> file as an ESM module once I moved it I also had to put a <code>package.json</code> file next to it that identified it as an ESM module. Like so:</p>
<div class="highlight">
<pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">"type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"module"</span><span class="p">,</span>
<span class="w">  </span><span class="s2">"private"</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
<p>I suppose, maybe it's a little like an <code>__init__.py</code> file in python that tells python to recognize a folder as a module (package?). Or maybe not. Anyway, going now and looking at the output of the tests - Hokey Shmokes, Bullwinkle! It works!</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgf0dafc7">
<h2 id="orgf0dafc7">Now the Other Hard Part</h2>
<div class="outline-text-2" id="text-orgf0dafc7">
<p>Okay, so the testing is working now, but just running tests is sort of meaningless (no offense to testers), the real point of it all is to get the tested javascript back into this post and use it.</p>
</div>
<div class="outline-3" id="outline-container-org1e3a50f">
<h3 id="org1e3a50f">First Let's Setup the Sketch Tag</h3>
<div class="outline-text-3" id="text-org1e3a50f">
<p>According to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">mozilla</a>, <code>&lt;script&gt;</code> tags are assumed to be javascript if you don't set a MIME type (and so they tell you not to set the <code>type</code> argument if it's a regular script) but to let the browser know it's a module you have to set the attribute <code>type="module"</code> in the tag. I'm going to use a convoluted name for the actual p5 sketch file that I'm making, but for demonstration's sake let's pretend it's called <code>sketch.js</code>, then the HTML tag to include it in this post would look like this.</p>
<div class="highlight">
<pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"sketch.js"</span> <span class="na">type</span><span class="o">=</span><span class="s">"module"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
<p>The <code>Greeter</code> class is going to be imported into our sketch module so we don't refer to it in the HTML.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org1d84485">
<h3 id="org1d84485">Now Let's Use It</h3>
<div class="outline-text-3" id="text-org1d84485">
<p>We'll import the <code>Greeter</code> into the sketch, setup the canvas, and then display the greeter's greetings on the canvas.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">GREETINGS_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"db4ce169-greetings-sketch"</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Greeter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"./greetings.js"</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">greetings_sketch</span><span class="p">(</span><span class="nx">p5js</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span><span class="mf">175</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="s2">"gainsboro"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">textSize</span><span class="p">(</span><span class="mf">32</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">103</span><span class="p">,</span><span class="w"> </span><span class="mf">153</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">peter_the_greeter_says</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Greeter</span><span class="p">();</span><span class="w">    </span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">peter_the_greeter_says</span><span class="p">.</span><span class="nx">greetings</span><span class="p">(),</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">noLoop</span><span class="p">();</span>
<span class="w">  </span><span class="p">};</span><span class="c1">// setup</span>
<span class="p">};</span><span class="w"> </span><span class="c1">// greetings_sketch</span>

<span class="ow">new</span><span class="w"> </span><span class="nx">p5</span><span class="p">(</span><span class="nx">greetings_sketch</span><span class="p">,</span><span class="w"> </span><span class="nx">GREETINGS_DIV</span><span class="p">);</span>
</pre></div>
<p>And now, here's the sketch.</p>
<p>
<script src="posts/cucumber-and-ecma-script-modules-esm/db4ce169-sketch.js" type="module"></script></p>
<div class="p5js" id="db4ce169-greetings-sketch"></div>
<p>Impressed?</p>
<p>Just for completeness, the folder with the code for the post has these files in it.</p>
<pre class="example" id="org1264842">
greeter.js
sketch.js
package.json
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org3ebf1e9">
<h2 id="org3ebf1e9">What Have We Learned?</h2>
<div class="outline-text-2" id="text-org3ebf1e9">
<p>This was an exercise in seeing if I could get cucumber.js and ESM modules working. In particular it was about testing code that gets included in this post and used by p5. This was a pretty simple example, but it seems to work so I'll take it as a start that I can reference when going back to work with more complex p5 code.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org405b2d8">
<h2 id="org405b2d8">Links</h2>
<div class="outline-text-2" id="text-org405b2d8">
<p>These are (mostly) referred to in the body of the post, and the body also has links not in here, but for future reference, this should be enough to get back up to speed.</p>
<ul class="org-ul">
<li>Cucumber.js [Internet]. Cucumber; 2023 [cited 2023 Jun 17]. Available from: <a href="https://github.com/cucumber/cucumber-js">https://github.com/cucumber/cucumber-js</a></li>
<li>Cucumber-JS Examples [Internet]. Cucumber; 2023 [cited 2023 Jun 17]. Available from: <a href="https://github.com/cucumber/cucumber-js-examples">https://github.com/cucumber/cucumber-js-examples</a></li>
<li>ES modules: A cartoon deep-dive – Mozilla Hacks - the Web developer blog [Internet]. Mozilla Hacks – the Web developer blog. [cited 2023 Jun 19]. Available from: <a href="https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive">https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive</a></li>
<li>JavaScript modules - JavaScript | MDN [Internet]. 2023 [cited 2023 Jun 19]. Available from: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules</a></li>
<li>CommonJS. In: Wikipedia [Internet]. 2023 [cited 2023 Jun 19]. Available from: <a href="https://en.wikipedia.org/w/index.php?title=CommonJS&amp;oldid=1154931652">https://en.wikipedia.org/w/index.php?title=CommonJS&amp;oldid=1154931652</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/link-collection/index.html">Link Collection</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/link-collection/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-14T12:14:06-07:00" itemprop="datePublished" title="2023-06-14 12:14">2023-06-14 12:14</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/link-collection/index.html#org1b7e570">Design Patterns</a></li>
<li><a href="posts/link-collection/index.html#org172177b">Creative Coding</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org1b7e570">
<h2 id="org1b7e570">Design Patterns</h2>
<div class="outline-text-2" id="text-org1b7e570">
<ul class="org-ul">
<li><a href="https://www.patterns.dev/">patterns.dev</a>: An online book of patterns for JavaScript and React.</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org172177b">
<h2 id="org172177b">Creative Coding</h2>
<div class="outline-text-2" id="text-org172177b">
<ul class="org-ul">
<li><a href="https://github.com/terkelg/awesome-creative-coding">Awesome Creative Coding</a>: A collection of links on github.</li>
<li><a href="https://awesomeopensource.com/project/terkelg/awesome-creative-coding">Awesome Creative Coding Again</a>: This looks like the same list but on <a href="https://awesomeopensource.com/">Awesome Open Source</a> so there might be more cross-linked pages.</li>
<li><a href="https://thelumiereguy.github.io/CreativeCodingExamples/">Creative Coding Examples</a>: Short page of examples.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bdd-testing-p5/index.html">Testing P5 with Mocha and Chai</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bdd-testing-p5/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-09T14:03:10-07:00" itemprop="datePublished" title="2023-06-09 14:03">2023-06-09 14:03</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bdd-testing-p5/index.html#org485e924">What This Is</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgf28fc9b">Setting Up the Tests</a>
<ul>
<li><a href="posts/bdd-testing-p5/index.html#org7db12d9">Running the Tests</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org2586ed6">Writing the Test File</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org49e00a6">Import Chai and Sinon</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orga02d251">Import the Color Increaser Class</a></li>
</ul>
</li>
<li><a href="posts/bdd-testing-p5/index.html#orgc1570ec">The Whole Code Module</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgfe47b8d">Channel Constants</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgfa81f39">Testing and Implementing the Color Increaser</a>
<ul>
<li><a href="posts/bdd-testing-p5/index.html#org31a6653">Mock Color</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org8ab844e">Setting Up the Tests</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org9b853ea">Does the ColorIncreaser Exist?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org81a8ae9">The ColorIncreaser Class</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org598aebc">Does it take an increment amount?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org20b4b4b">Does it take a color?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgf7fb929">The Increaser</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgdbab8ba">Does it wrap red back to 255 when it hits 256?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgbb9a2f3">Does Green Wrap Too?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgd77acf8">Does Blue Wrap Too?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org7075328">The Next Method</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgbbb394f">Does next return the color?</a></li>
<li><a href="posts/bdd-testing-p5/index.html#orgc81898b">Export the Color Increaser</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org1604e7a">Running The tests</a></li>
</ul>
</li>
<li><a href="posts/bdd-testing-p5/index.html#org5904558">The Sketch</a>
<ul>
<li><a href="posts/bdd-testing-p5/index.html#org0b2e7d6">The Sketch Function</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org0684069">The <code>setup</code> Function</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org4e12bd0">The <code>draw</code> Function</a></li>
</ul>
</li>
<li><a href="posts/bdd-testing-p5/index.html#org0771b69">The End</a></li>
<li><a href="posts/bdd-testing-p5/index.html#org6bf6830">Sources</a></li>
</ul>
</div>
</div>
<p>
<script src="posts/bdd-testing-p5/color-increaser.js"></script>
<script src="posts/bdd-testing-p5/sketch.js"></script></p>
<div class="p5js" id="6a5fb18a-bdd-sketch"></div>
<div class="outline-2" id="outline-container-org485e924">
<h2 id="org485e924">What This Is</h2>
<div class="outline-text-2" id="text-org485e924">
<p>This is a walk-through of the <a href="https://p5js.org/learn/tdd.html">test-driven development example</a> on the <a href="https://p5js.org/">p5js site</a>. The color changing square above is created by exhaustively stepping through the RGB values for a p5 <a href="https://p5js.org/reference/#/p5.Color">color</a>. The site documentation doesn't seem to tell you the name of the color array attribute so you can access it, instead it tells you to use setter methods, but the tutorial indicates that the array is stored as an attribute of the color object named <code>levels</code> so we'll be working with that to change the colors.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgf28fc9b">
<h2 id="orgf28fc9b">Setting Up the Tests</h2>
<div class="outline-text-2" id="text-orgf28fc9b"></div>
<div class="outline-3" id="outline-container-org7db12d9">
<h3 id="org7db12d9">Running the Tests</h3>
<div class="outline-text-3" id="text-org7db12d9">
<p>To run the tests I'll use three things:</p>
<ul class="org-ul">
<li><a href="https://mochajs.org/">mocha</a>: the framework to define the tests</li>
<li><a href="https://nodemon.io/">nodemon</a>: a program that watches our code and re-runs mocha if something changes</li>
<li><a href="https://docs.npmjs.com/">npm</a>: the node-package-manager which will run nodemon to run mocha</li>
</ul>
<p><code>npm</code> comes with and works with <a href="https://nodejs.dev/en/">node</a> so I guess we really need four things.</p>
<p>To run the tests I created a <code>package.json</code> file which points to the folder with the test code in it (or any folder next to the <code>package.json</code> file whose name starts with <code>test</code>).</p>
<div class="highlight">
<pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="s2">"scripts"</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">"test"</span><span class="o">:</span><span class="w"> </span><span class="s2">"nodemon --watch . --exec 'mocha ./test* || true'"</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>Weirdly, the mocha <a href="https://mochajs.org/#getting-started">Getting Started</a> documentation has an example <code>package.json</code> snippet to run <code>mocha</code> which doesn't put curly braces outside of the "scripts" attribute, but this will cause <code>npm</code> to throw an error saying that it isn't valid JSON. Maybe they figure you'd just know it. Or maybe they expect that you'd install <code>mocha</code> locally so there'd be an existing <code>package.json</code> that you just have to edit. Anyway, to run the tests I go into the folder above the test-folder and run <code>npm</code> like this:</p>
<div class="highlight">
<pre><span></span>npm test
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org2586ed6">
<h3 id="org2586ed6">Writing the Test File</h3>
<div class="outline-text-3" id="text-org2586ed6"></div>
<div class="outline-4" id="outline-container-org806d7a3">
<h4 id="org806d7a3">Put It In Strict Mode</h4>
<div class="outline-text-4" id="text-org806d7a3">
<p>Javascript can be pretty lenient about letting what might be considered mistakes pass through without raising an error. I'll put the test-code into <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">Strict Mode</a>, making our mistakes more evident, hopefully, by putting this line at the top of the <code>test.js</code> file:</p>
<div class="highlight">
<pre><span></span><span class="s2">"use strict"</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org49e00a6">
<h3 id="org49e00a6">Import Chai and Sinon</h3>
<div class="outline-text-3" id="text-org49e00a6">
<p>I'm going to use the <a href="https://en.wikipedia.org/wiki/Behavior-driven_development?useskin=vector">Behavior-Driven Development</a> (BDD) version of <a href="https://www.chaijs.com/api/bdd/">Chai</a> to make our assertions about what we expect the code to be doing.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">expect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"chai"</span><span class="p">).</span><span class="nx">expect</span><span class="p">;</span>
</pre></div>
<p>I'm also going to stub some methods using <a href="https://sinonjs.org/">sinon</a>.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">sinon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s2">"sinon"</span><span class="p">);</span>
</pre></div>
<p><b>Note:</b> I originally had the <code>ColorIncreaser</code> class that I'm going to test in the same file as the sketch which caused an error because the sketch refers to a <code>p5</code> object that gets pulled in from a CDN by an HTML tag. I later decided to move it into its own file so there's no longer a need to mock <code>p5</code>, but if you ever need to do it you can add this line before importing anything from the sketch file:</p>
<div class="highlight">
<pre><span></span><span class="nb">global</span><span class="p">.</span><span class="nx">p5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sinon</span><span class="p">.</span><span class="nx">stub</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orga02d251">
<h3 id="orga02d251">Import the Color Increaser Class</h3>
<div class="outline-text-3" id="text-orga02d251">
<p>We're going to create a <code>ColorIncreaser</code> class which we need to import into the test code. Our import is going to look a little funky, though, because the sketch is in a folder created for this post.</p>
<ul class="org-ul">
<li><code>files/posts/bdd-testing-p5/</code></li>
</ul>
<p>But the test-code is in a different folder.</p>
<ul class="org-ul">
<li><code>tests/mocha-tests/test-bdd-testing-p5/</code></li>
</ul>
<p>This folder sits next to the <code>files</code> folder. So our test code has to go up two levels and then back down into the <code>files</code> to get the sketch code.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'../../../files/posts/bdd-testing-p5/color-increaser'</span><span class="p">);</span>
</pre></div>
<p>Note that the path is relative to where the javascript file with the tests is, not where I'm running <code>mocha</code>. Also, although it looks like a file reference, the file is called <code>color-increaser.js</code>, but we're treating it as a module so we don't put the file extension on it.</p>
<p>Also, in order to be able to import the class we need to set it as exportable in the file where the class is defined - but I'll show that after the class is defined.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc1570ec">
<h2 id="orgc1570ec">The Whole Code Module</h2>
<div class="outline-text-2" id="text-orgc1570ec">
<p>Since this is about coding test-driven I'm going to show the tests and then the implementation that gets written to pass the test. This makes it kind of disorienting to read so I thought I'd show the entire <code>color-increaser.js</code> file that's being created here exactly as it ends up once it's all done.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">RED</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">GREEN</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="nx">BLUE</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ALPHA</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MAXIMUM</span><span class="o">:</span><span class="w"> </span><span class="mf">255</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MINIMUM</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="p">};</span>

<span class="kd">class</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">color_increment</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color_increment</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="c1">// end constructor</span>

<span class="w">  </span><span class="nx">increase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end increase</span>

<span class="w">  </span><span class="nx">next</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span><span class="w">  </span><span class="c1">//end next</span>
<span class="p">};</span><span class="w"> </span><span class="c1">// end ColorIncreaser</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"undefined"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfe47b8d">
<h2 id="orgfe47b8d">Channel Constants</h2>
<div class="outline-text-2" id="text-orgfe47b8d">
<p>I have a tendency to flip values around (sometimes it seems like blue should come before green, for example) so I like to create objects to hold values that get used repeatedly. This at the top of the same module as the Color Increaser class.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">RED</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">  </span><span class="nx">GREEN</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<span class="w">  </span><span class="nx">BLUE</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<span class="w">  </span><span class="nx">ALPHA</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MAXIMUM</span><span class="o">:</span><span class="w"> </span><span class="mf">255</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MINIMUM</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfa81f39">
<h2 id="orgfa81f39">Testing and Implementing the Color Increaser</h2>
<div class="outline-text-2" id="text-orgfa81f39">
<p>Now we'll write the tests and implement the <code>ColorIncreaser</code> class along with it.</p>
</div>
<div class="outline-3" id="outline-container-org31a6653">
<h3 id="org31a6653">Mock Color</h3>
<div class="outline-text-3" id="text-org31a6653">
<p>We don't want to use any p5 objects in the testing so we'll make a fake <a href="https://p5js.org/reference/#/p5/color">color</a> object, implementing its undocumented (as far as I can tell) <code>levels</code> attribute as an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>.</p>
<div class="highlight">
<pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">MockColor</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">red</span><span class="p">,</span><span class="w"> </span><span class="nx">green</span><span class="p">,</span><span class="w"> </span><span class="nx">blue</span><span class="p">,</span><span class="w"> </span><span class="nx">alpha</span><span class="p">){</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="nx">red</span><span class="p">,</span>
<span class="w">      </span><span class="nx">green</span><span class="p">,</span>
<span class="w">      </span><span class="nx">blue</span><span class="p">,</span>
<span class="w">      </span><span class="nx">alpha</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end constructor</span>
<span class="w"> </span><span class="p">}</span><span class="c1">// end mock_color</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org8ab844e">
<h3 id="org8ab844e">Setting Up the Tests</h3>
<div class="outline-text-3" id="text-org8ab844e">
<p><code>mocha</code>'s <code>describe</code> function acts like a header around our tests. Within it I'm setting some constants and also defining a <code>beforeEach</code> function which will create a new <code>ColorIncreaser</code> object before running each test so it won't have any changes we make in the other tests spilling over. Although I could import the <code>CHANNELS</code> object with the constants I thought it'd be a better check to create a new set to double-check what's going on in the code being tested.</p>
<div class="highlight">
<pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s1">'Given the ColorIncreaser class definition'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="w"> </span><span class="p">]</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">255</span><span class="p">];</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">RED</span><span class="p">,</span><span class="w"> </span><span class="nx">GREEN</span><span class="p">,</span><span class="w"> </span><span class="nx">BLUE</span><span class="p">,</span><span class="w"> </span><span class="nx">ALPHA</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">];</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">RED</span><span class="p">,</span><span class="w"> </span><span class="nx">GREEN</span><span class="p">,</span><span class="w"> </span><span class="nx">BLUE</span><span class="p">,</span><span class="w"> </span><span class="nx">ALPHA</span><span class="p">];</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">COLOR_INCREMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">color_increaser</span><span class="p">;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">color_mock</span><span class="p">;</span>

<span class="w">  </span><span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">color_mock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MockColor</span><span class="p">(</span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span>
<span class="w">                               </span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">);</span>
<span class="w">    </span><span class="nx">color_increaser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="p">(</span><span class="nx">COLOR_INCREMENT</span><span class="p">,</span>
<span class="w">                                         </span><span class="nx">color_mock</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org9b853ea">
<h3 id="org9b853ea">Does the ColorIncreaser Exist?</h3>
<div class="outline-text-3" id="text-org9b853ea">
<p>Our first test makes sure that we were able to create the <code>ColorIncreaser</code> object. This is actually a little bit of a fake because the <code>beforeEach</code> will fail if we can't create the object and it won't actually reach this test. I suppose you could still break it by making a function named <code>ColorIncreaser</code> instead of a class so this acts as an extra check.</p>
<p>First we make a section header to make it a little clearer (it doesn't actually affect the tests, just the output after the test is run).</p>
<div class="highlight">
<pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">"When the ColorIncreaser is constructed"</span><span class="p">,</span>
<span class="w">          </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
<p>And then the actual test to see if the constructor created an object.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="w"> </span><span class="p">(</span><span class="s2">"Then it should be an object"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">expect</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">'object'</span><span class="p">);</span>
<span class="w">  </span><span class="nx">done</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<p>Mocha will <a href="https://mochajs.org/#asynchronous-code">run the tests asynchronously</a> (parallel and out of order) so we need to accept the <code>done</code> function and then call it when the test is finished so mocha knows that the test is done.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org81a8ae9">
<h3 id="org81a8ae9">The ColorIncreaser Class</h3>
<div class="outline-text-3" id="text-org81a8ae9">
<p>Now that we have the test I'll define the class and its constructor. It's a pretty basic class, here's a class diagram of its attributes.</p>
<p><img alt="Color Increaser class diagram" src="posts/bdd-testing-p5/color-increaser.webp"></p>
<p>And here's the class and constructor definition.</p>
<div class="highlight">
<pre><span></span><span class="kd">class</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">color_increment</span><span class="p">,</span><span class="w"> </span><span class="nx">color</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color_increment</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="c1">// end constructor</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org598aebc">
<h3 id="org598aebc">Does it take an increment amount?</h3>
<div class="outline-text-3" id="text-org598aebc">
<p>This is just a sanity check to make sure that the constructor actually saved the increment amount we passed in.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"And it should set the color_increment"</span><span class="p">,</span>
<span class="w">   </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
<span class="w">     </span><span class="nx">expect</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">COLOR_INCREMENT</span><span class="p">);</span>
<span class="w">     </span><span class="nx">done</span><span class="p">();</span>
<span class="w">   </span><span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org20b4b4b">
<h3 id="org20b4b4b">Does it take a color?</h3>
<div class="outline-text-3" id="text-org20b4b4b">
<p>This is another check to make sure the constructor saved the color object that got passed in. I couldn't find a same-object checker in <code>chai</code> but the <code>eql</code> is described as a check that the objects are "deeply-equal" which I assume is the same thing.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"And set the color attribute"</span><span class="p">,</span>
<span class="w">  </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="nx">color_mock</span><span class="p">);</span>
<span class="w">    </span><span class="nx">done</span><span class="p">();</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgf7fb929">
<h3 id="orgf7fb929">The Increaser</h3>
<div class="outline-text-3" id="text-orgf7fb929">
<p>We're going to implement a method for the <code>ColorIncreaser</code> that will increment the color-array so let's check that it works. It sort of treats the three color channels (Red, Green, and Blue… we'll pretend Alpha doesn't exist) like a three-digit number using base 255 instead of 10 and with the digits being BGR. So we start with all three channels at 0, then we increment red from 0 to 255 and when it hits 256 we set it back to 0 and set green to 1, then we repeat this over and over until green goes up to 256 at which point we reset both red and green to 0 and set blue to 1 and so on.</p>
<p>I'll add a <code>describe</code> section to the tests to make it clearer where testing this method starts.</p>
<div class="highlight">
<pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">"And when the increase() method is called"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-orgbdfe2a9">
<h4 id="orgbdfe2a9">Does the red channel increase?</h4>
<div class="outline-text-4" id="text-orgbdfe2a9">
<p>Until it increments the red channel past 255 the other channels don't change so we'll first test that only the red channel changes up until that point.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="w"> </span><span class="p">(</span><span class="s2">"Then it should increment red up until 255"</span><span class="p">,</span>
<span class="w">    </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">count</span><span class="o">=</span><span class="nx">RGB_MIN</span><span class="p">;</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">;</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="o">+=</span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">RGB_MAX</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">]</span>

<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">channel</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span>
<span class="w">        </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">channel</span><span class="p">]).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">expected</span><span class="p">[</span><span class="nx">index</span><span class="p">]));</span>

<span class="w">      </span><span class="nx">done</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org29e271a">
<h4 id="org29e271a">The Color-Increaser Method</h4>
<div class="outline-text-4" id="text-org29e271a">
<p>So now I'll add the <code>increase</code> method to the <code>ColorIncreaser</code> class which adds the <code>color_increment</code> to the red-channel when it's called.</p>
<div class="highlight">
<pre><span></span><span class="nx">increase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgdbab8ba">
<h3 id="orgdbab8ba">Does it wrap red back to 255 when it hits 256?</h3>
<div class="outline-text-3" id="text-orgdbab8ba">
<p>The channels can only go up to 255 so once we hit 256:</p>
<ul class="org-ul">
<li>red wraps back to 0</li>
<li>green increments one</li>
</ul>
<p>The tutorial uses for-loops to actually step through and increment the color until it passes the limit but I'll cheat and just set the red-channel to the limit and then increment it.</p>
<p>These are our expected values before and after the call to <code>increase</code>.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Channel</th>
<th class="org-right" scope="col">Before Increase</th>
<th class="org-right" scope="col">After Increase</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Red</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Green</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
</tr>
<tr>
<td class="org-left">Blue</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Alpha</td>
<td class="org-right">255</td>
<td class="org-right">255</td>
</tr>
</tbody>
</table>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="w"> </span><span class="p">(</span><span class="s2">"But red should wrap-around to 0 when it hits 256 and increment green"</span><span class="p">,</span>
<span class="w">    </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">;</span>
<span class="w">      </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">COLOR_INCREMENT</span><span class="p">,</span>
<span class="w">                      </span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">];</span>
<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">channel</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span>
<span class="w">        </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">channel</span><span class="p">]).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">expected</span><span class="p">[</span><span class="nx">index</span><span class="p">]));</span>
<span class="w">      </span><span class="nx">done</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org5326c60">
<h4 id="org5326c60">The Wrap-Red Conditional</h4>
<div class="outline-text-4" id="text-org5326c60">
<p>Within the <code>increase</code> method we add this little chunk after incrementing the red channel.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgbb9a2f3">
<h3 id="orgbb9a2f3">Does Green Wrap Too?</h3>
<div class="outline-text-3" id="text-orgbb9a2f3">
<p>As with red, the green channel can only go up to 255 so once we increase green to 256:</p>
<ul class="org-ul">
<li>wrap green back to 0</li>
<li>increment blue</li>
</ul>
<p>Also, since we only increment green if red hits 256 it wraps back to 0 too. Once again, I'm forgoing looping and incrementing and instead just setting the red and green channels to their limits and then calling <code>increase</code>.</p>
<p>These are our expected values before and after the call to <code>increase</code>.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Channel</th>
<th class="org-right" scope="col">Before Increase</th>
<th class="org-right" scope="col">After Increase</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Red</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Green</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Blue</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
</tr>
<tr>
<td class="org-left">Alpha</td>
<td class="org-right">255</td>
<td class="org-right">255</td>
</tr>
</tbody>
</table>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"And it should wrap-around green and increase blue if green exceeds 255"</span><span class="p">,</span>
<span class="w">   </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">RED</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">;</span>
<span class="w">     </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">;</span>

<span class="w">     </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>

<span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span>
<span class="w">                     </span><span class="nx">COLOR_INCREMENT</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">];</span>

<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">channel</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span>
<span class="w">        </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">channel</span><span class="p">]).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span>
<span class="w">          </span><span class="nx">expected</span><span class="p">[</span><span class="nx">index</span><span class="p">]));</span>
<span class="w">    </span><span class="nx">done</span><span class="p">();</span>
<span class="w">   </span><span class="p">});</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-orgeb4223f">
<h4 id="orgeb4223f">The Wrap-Green Conditional</h4>
<div class="outline-text-4" id="text-orgeb4223f">
<p>Now within the <code>increase</code> method we add this little chunk after incrementing the red channel to check the green channel.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">GREEN</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color_increment</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgd77acf8">
<h3 id="orgd77acf8">Does Blue Wrap Too?</h3>
<div class="outline-text-3" id="text-orgd77acf8">
<p>As with red and green, the blue channel can only go up to 255 so once we increase blue to 256:</p>
<ul class="org-ul">
<li>wrap all three channels back to 0</li>
</ul>
<p>These are our expected values before and after the call to <code>increase</code>.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Channel</th>
<th class="org-right" scope="col">Before Increase</th>
<th class="org-right" scope="col">After Increase</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Red</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Green</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Blue</td>
<td class="org-right">255</td>
<td class="org-right">0</td>
</tr>
<tr>
<td class="org-left">Alpha</td>
<td class="org-right">255</td>
<td class="org-right">255</td>
</tr>
</tbody>
</table>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"And it should wrap-around all colors when blue exceeds 255"</span><span class="p">,</span>
<span class="w">   </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
<span class="w">       </span><span class="nx">channel</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">channel</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">RGB_MAX</span><span class="p">);</span>

<span class="w">     </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>

<span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span><span class="w"> </span><span class="nx">RGB_MIN</span><span class="p">,</span>
<span class="w">                     </span><span class="nx">RGB_MAX</span><span class="p">];</span>

<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">channel</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">expect</span><span class="p">(</span>
<span class="w">        </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">channel</span><span class="p">]).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span>
<span class="w">          </span><span class="nx">expected</span><span class="p">[</span><span class="nx">index</span><span class="p">]));</span>

<span class="w">    </span><span class="nx">done</span><span class="p">();</span>
<span class="w">   </span><span class="p">});</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org35797a7">
<h4 id="org35797a7">The Wrap-Blue Conditional</h4>
<div class="outline-text-4" id="text-org35797a7">
<p>I originally just used a modulus to keep blue within range, but since we're allowing the user to change the increment this might not always go back to zero so here's the conditional that resets the blue channel if it exceeds the limit.</p>
<div class="highlight">
<pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">.</span><span class="nx">levels</span><span class="p">[</span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">BLUE</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
<p>And there we have our exhaustive channel incrementer.</p>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org7075328">
<h3 id="org7075328">The Next Method</h3>
<div class="outline-text-3" id="text-org7075328">
<p>I'm going to implement a <code>next</code> method to simplify things a little. It'll call increase and the return the color object. Just because.</p>
<div class="highlight">
<pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">"And when the next() method is called"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org865e79e">
<h4 id="org865e79e">Does the next method increase the color?</h4>
<div class="outline-text-4" id="text-org865e79e">
<p>To check that next calls the <code>increase</code> method I'll monkey-patch it with a <a href="https://sinonjs.org/releases/latest/spies/">sinon spy</a> and check that when we call <code>next</code> the <code>increase</code> spy gets called.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">"Then it should increase the color"</span><span class="p">,</span>
<span class="w">  </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">spy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">sinon</span><span class="p">.</span><span class="nx">spy</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">,</span><span class="w"> </span><span class="s2">"increase"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
<span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">spy</span><span class="p">.</span><span class="nx">calledOnce</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
<span class="w">    </span><span class="nx">spy</span><span class="p">.</span><span class="nx">restore</span><span class="p">();</span>
<span class="w">    </span><span class="nx">done</span><span class="p">();</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org438665c">
<h4 id="org438665c">The Next Method</h4>
<div class="outline-text-4" id="text-org438665c">
<p>Now I'll implement the <code>next</code> method and have it call the <code>increase</code> method.</p>
<div class="highlight">
<pre><span></span><span class="nx">next</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">increase</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgbbb394f">
<h3 id="orgbbb394f">Does next return the color?</h3>
<div class="outline-text-3" id="text-orgbbb394f">
<p>Instead of requiring the user to make two calls I'll have the next method return the color object directly.</p>
<div class="highlight">
<pre><span></span><span class="nx">it</span><span class="w"> </span><span class="p">(</span><span class="s2">"And return the color"</span><span class="p">,</span>
<span class="w">    </span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">actual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
<span class="w">      </span><span class="nx">expect</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">eql</span><span class="p">(</span><span class="nx">actual</span><span class="p">);</span>
<span class="w">      </span><span class="nx">done</span><span class="p">();</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org4f13b3e">
<h4 id="org4f13b3e">Return the color</h4>
<div class="outline-text-4" id="text-org4f13b3e">
<p>Now in our <code>ColorIncreaser.next</code> method we return the color.</p>
<div class="highlight">
<pre><span></span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgc81898b">
<h3 id="orgc81898b">Export the Color Increaser</h3>
<div class="outline-text-3" id="text-orgc81898b">
<p>The implementation so far is good enough to get the code working within the p5 sketch, which would normally be the ultimate goal. But in order for the test code to be able to import the <code>ColorIncreaser</code> (using the <code>require</code> function) we need to add a line in the file with the <code>ColorIncreaser</code> definition to export it.</p>
<p>The code given in the tutorial just has the export line, but this will raise an error outside of node.js - so it works for testing but causes a <code>ReferenceError</code> in the browser (when using a python-based server anyway) so to prevent that from happening I added a check that will do the export only if the <code>module</code> is defined, which is an indication that this is being used in node (or I messed up and defined it somewhere else).</p>
<div class="highlight">
<pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">typeof</span><span class="w"> </span><span class="nx">module</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"undefined"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org1604e7a">
<h3 id="org1604e7a">Running The tests</h3>
<div class="outline-text-3" id="text-org1604e7a">
<p>Now, let's see what it looks like when we run the tests.</p>
<div class="highlight">
<pre><span></span>mocha ../tests/test*
</pre></div>
<pre class="example" id="org9a1ac08">


Given the ColorIncreaser class definition
  When the ColorIncreaser is constructed
    ✔ Then it should be an object
    ✔ And it should set the color_increment
    ✔ And set the color attribute
  And when the increase() method is called
    ✔ Then it should increment red up until 255
    ✔ But red should wrap-around to 0 when it hits 256 and increment green
    ✔ And it should wrap-around green and increase blue if green exceeds 255
    ✔ And it should wrap-around all colors when blue exceeds 255
  And when the next() method is called
    ✔ Then it should increase the color
    ✔ And return the color


9 passing (11ms)

</pre>
<p>The output in the terminal has some color added to the text so it looks prettier, but otherwise that's the output of running our tests.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org5904558">
<h2 id="org5904558">The Sketch</h2>
<div class="outline-text-2" id="text-org5904558">
<p>Now that we have the <code>ColorIncreaser</code> we can add it to a sketch to change the colors of the square that we're drawing.</p>
</div>
<div class="outline-3" id="outline-container-org0b2e7d6">
<h3 id="org0b2e7d6">The Sketch Function</h3>
<div class="outline-text-3" id="text-org0b2e7d6">
<p>As I noted before, I'm using the instance-mode syntax for the sketch so this is the function that holds the <code>setup</code> and <code>draw</code> functions.</p>
<div class="highlight">
<pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">flashing_square</span><span class="p">(</span><span class="nx">p5js</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">500</span><span class="p">;</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">color_increaser</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org0684069">
<h3 id="org0684069">The <code>setup</code> Function</h3>
<div class="outline-text-3" id="text-org0684069">
<p>The setup creates the canvas and color increaser instance.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span><span class="nx">SIZE</span><span class="p">,</span><span class="w"> </span><span class="nx">SIZE</span><span class="p">);</span>
<span class="w">  </span><span class="nx">color_increaser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ColorIncreaser</span><span class="p">(</span>
<span class="w">    </span><span class="mf">1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span>
<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">,</span>
<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">,</span>
<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MINIMUM</span><span class="p">,</span>
<span class="w">      </span><span class="nx">CHANNELS</span><span class="p">.</span><span class="nx">MAXIMUM</span><span class="p">));</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org4e12bd0">
<h3 id="org4e12bd0">The <code>draw</code> Function</h3>
<div class="outline-text-3" id="text-org4e12bd0">
<p>The draw sets the background color and increases its value once per frame.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="nx">color_increaser</span><span class="p">.</span><span class="nx">next</span><span class="p">());</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0771b69">
<h2 id="org0771b69">The End</h2>
<div class="outline-text-2" id="text-org0771b69">
<p>So, there you go. The sketch wasn't so exciting, but the main value in going through the exercise, I think, was being able to get the javascript testing infrastructure working and getting back into using chai and sinon and the crazy world of module imports in javascript.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org6bf6830">
<h2 id="org6bf6830">Sources</h2>
<div class="outline-text-2" id="text-org6bf6830">
<ul class="org-ul">
<li>Behavior-driven development. In: Wikipedia [Internet]. 2023 [cited 2023 Jun 9]. Available from: <a href="https://en.wikipedia.org/w/index.php?title=Behavior-driven_development&amp;oldid=1158619924">https://en.wikipedia.org/w/index.php?title=Behavior-driven_development&amp;oldid=1158619924</a></li>
<li>Expect / Should - Chai [Internet]. [cited 2023 Jun 9]. Available from: <a href="https://www.chaijs.com/api/bdd/">https://www.chaijs.com/api/bdd/</a></li>
<li>nodemon [Internet]. [cited 2023 Jun 9]. Available from: <a href="https://nodemon.io/">https://nodemon.io/</a></li>
<li>Sinon.JS - Standalone test fakes, spies, stubs and mocks for JavaScript. Works with any unit testing framework. [Internet]. [cited 2023 Jun 9]. Available from: <a href="https://sinonjs.org/">https://sinonjs.org/</a></li>
<li>Unit Testing and Test Driven Development | p5.js [Internet]. [cited 2023 Jun 8]. Available from: <a href="https://p5js.org/learn/tdd.html">https://p5js.org/learn/tdd.html</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bibliography-the-nature-of-code/index.html">The Nature of Code</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bibliography-the-nature-of-code/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-06T13:55:23-07:00" itemprop="datePublished" title="2023-06-06 13:55">2023-06-06 13:55</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bibliography-the-nature-of-code/index.html#orga5f7da7">The Book</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-orga5f7da7">
<h2 id="orga5f7da7">The Book</h2>
<div class="outline-text-2" id="text-orga5f7da7">
<p>The product page for the book points to the older version of the book.</p>
<ul class="org-ul">
<li>Nature of Code [Internet]. [cited 2023 May 11]. Available from: <a href="https://natureofcode.com">https://natureofcode.com</a></li>
</ul>
<p>The version I'm looking at is the second edition which uses p5.js.</p>
<ul class="org-ul">
<li><a href="https://nature-of-code-2nd-edition.netlify.app/">https://nature-of-code-2nd-edition.netlify.app/</a> : the hosted book</li>
<li><a href="https://github.com/nature-of-code/noc-book-2023">https://github.com/nature-of-code/noc-book-2023</a>: the repository for the book</li>
<li>
<p><a href="https://github.com/nature-of-code/noc-examples-p5.js">https://github.com/nature-of-code/noc-examples-p5.js</a>: The p5.js version of the examples in the book(s)</p>
<p>Daniel Shiffman also has a website called <a href="https://thecodingtrain.com/">the Coding Train</a> with videos about programming. There is a Nature of Code "track" (<a href="https://thecodingtrain.com/tracks/the-nature-of-code-2">https://thecodingtrain.com/tracks/the-nature-of-code-2</a>) but it only goes part of the way through chapter 1.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bibliography-generative-art/index.html">Generative Art</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bibliography-generative-art/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-04T12:58:39-07:00" itemprop="datePublished" title="2023-06-04 12:58">2023-06-04 12:58</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div class="outline-2" id="outline-container-org5367562">
<h2 id="org5367562">The Book</h2>
<div class="outline-text-2" id="text-org5367562">
<ul class="org-ul">
<li>Pearson M. Generative art: a practical guide using processing. Shelter Island, NY : London: Manning ; Pearson Education [distributor]; 2011. 197 pages</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org303e5a3">
<h2 id="org303e5a3">The Author's Site(s)</h2>
<div class="outline-text-2" id="text-org303e5a3"></div>
<div class="outline-3" id="outline-container-orgfe5455a">
<h3 id="orgfe5455a">Zen Bullets (probably)</h3>
<div class="outline-text-3" id="text-orgfe5455a">
<p>The Zen Bullets site doesn't have the author's name listed on it (that I could see) but there's references to this being his pen-name (e.g. on <a href="https://leanpub.com/u/zenbullets">leanpub</a>) and the works look about right.</p>
<ul class="org-ul">
<li><a href="http://zenbullets.com/">http://zenbullets.com/</a> : This appears to be the author's main site</li>
<li><a href="http://zenbullets.com/abandonedart/">http://zenbullets.com/abandonedart/</a> : This is a sub-section of the site that appears to match what's in the book (images only).</li>
<li><a href="https://github.com/calculata/AbandonedArt">https://github.com/calculata/AbandonedArt</a>: This is a github page with the processing sketches that the <a href="https://manning-content.s3.amazonaws.com/download/7/0151371-391d-43c6-b978-3b5ae90c7a73/Pearson_Errata.html">book's errata page</a> links to.</li>
</ul>
<p>The Zen Bullets site uses a very small font and you can't scroll the menu on the left if you increase the font size and it pushes the text off the pgae so you it's pretty hard to read the navigational text beyond the top items in the menu, but all the links appear to be to interesting stuff so it's worth it to just click on the links even if you can't read them.</p>
</div>
</div>
<div class="outline-3" id="outline-container-orge489fc6">
<h3 id="orge489fc6">Abandoned Art (Possibly Truly Abandoned)</h3>
<div class="outline-text-3" id="text-orge489fc6">
<p><b>Warning:</b> uBlock Origin blocks this site because the web-host it uses is listed as untrustworthy, so I haven't actually seen the page, but it's listed in the book and the book's <a href="https://www.manning.com/books/generative-art">product page</a> so I'm including it mostly to remind myself not to go there, even though they tell you to (the errata page does have a a note saying the site's license is expired, but they didn't fix the main page).</p>
<ul class="org-ul">
<li>abandonedart.org</li>
<li><a href="https://www.scam-detector.com/validator/iyfbodn-com-review/">https://www.scam-detector.com/validator/iyfbodn-com-review/</a> : Describes the reason why the web-host is considered untrustworthy.</li>
</ul>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org2c208a4">
<h2 id="org2c208a4">Other Artist's Mentioned In the Book</h2>
<div class="outline-text-2" id="text-org2c208a4">
<p>These are ones that I could find dedicated sites for. The earliest pioneers (other than Manfred Mohr and Paul Brown) don't seem to have websites with their work.</p>
<ul class="org-ul">
<li><a href="https://www.syedrezaali.com/">Reza Ali</a></li>
<li><a href="http://www.paul-brown.com/">Paul Brown</a>: The site looks like it was built in the 1990's so I found it too painful to look through, but there's a lot there.</li>
<li><a href="http://sub.blue/">Tom Beddard</a>: His site, Sub.Blue (http only).</li>
<li><a href="https://roberthodgin.com/">Robert Hodgin</a></li>
<li><a href="http://www.aaronkoblin.com/">Aaron Koblin</a>: The link is to his web-site (<a href="https://en.wikipedia.org/wiki/Aaron_Koblin?useskin=vector">wikipedia page</a>).</li>
<li><a href="http://www.emohr.com/">Manfred Mohr</a>: His site has works going back to the 1960's (switched to computers in 1969). Many have descriptions of what the algorithm does.</li>
<li><a href="https://reas.com/">Casey Reas</a>: One of the creators of Processing.</li>
<li><a href="https://www.saint-clair.net/">Jerome Saint-Clair</a>: The newest work on the site is from 2012 so he's either inactive or this is an old site.</li>
<li><a href="https://www.infinite.center/">Jared Tarbell</a>: His site "Infinite Center" (latest post January 8, 2020). Is this <a href="http://www.complexification.net/programmer.html">one of the founders of etsy</a>?. Also <a href="http://www.complexification.net/gallery/">complexification.net</a> (2012, no https). The sketchs on the old site are java applets so you have to open the applet (which won't run) then copy the source and run it as java.</li>
<li><a href="https://github.com/blprnt">Jer Thorp</a>: The link is to his github repositories, I couldn't find a web-page for him. There's a <a href="https://www.reddit.com/domain/blog.blprnt.com/">reddit page</a> for his blog, but the blog is gone and the reddit threads are old.</li>
<li><a href="https://mariuswatz.com/">Marius Waltz</a> : The site only has some work representing what he does, doing an image search with his name and the title of a piece (e.g. Grid Distortion) will pull up more variations.</li>
<li><a href="https://winterbloed.be/">Frederik Vanhoutte</a>: I didn't see his name on the site (<i>winterbloed.be</i>) but <i>Winterbloed</i> appears to be his pen-name. (http only)</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/generative-art-circles/index.html">Generative Art Circles</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/generative-art-circles/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-06-03T15:58:01-07:00" itemprop="datePublished" title="2023-06-03 15:58">2023-06-03 15:58</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/generative-art-circles/index.html#orgd88491c">A Circle</a></li>
<li><a href="posts/generative-art-circles/index.html#orgcbbe731">Closure, Constants, and Variables</a>
<ul>
<li><a href="posts/generative-art-circles/index.html#orgd997913">Constants</a></li>
<li><a href="posts/generative-art-circles/index.html#orgdf97d46">Variables</a></li>
</ul>
</li>
<li><a href="posts/generative-art-circles/index.html#org8e35013">Set Up</a></li>
<li><a href="posts/generative-art-circles/index.html#orgf6de061">Draw</a>
<ul>
<li><a href="posts/generative-art-circles/index.html#org03c2d05">Looping Around the Circle</a></li>
<li><a href="posts/generative-art-circles/index.html#org4ccada4">The Coordinates of the Circle's Points</a></li>
<li><a href="posts/generative-art-circles/index.html#org46b0a50">Now We Draw</a></li>
<li><a href="posts/generative-art-circles/index.html#orgcfcb54c">And the Rest</a></li>
</ul>
</li>
<li><a href="posts/generative-art-circles/index.html#org7f744e4">Closing Up</a></li>
<li><a href="posts/generative-art-circles/index.html#orgdaf1360">References</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-orgd88491c">
<h2 id="orgd88491c">A Circle</h2>
<div class="outline-text-2" id="text-orgd88491c">
<p>This is a starting point for looking at cyclic sketches. In this case it's just a circle but it's a basic concept that I'll probably use more of later so I thought I'd make a dedicated post for it. In particular it uses <a href="https://en.wikipedia.org/wiki/Polar_coordinate_system?useskin=vector">Polar Coordinates</a> which might come in handy.</p>
<p>
<script src="posts/generative-art-circles/circle.js"></script></p>
<div class="p5js" id="5fa2c81b-hard-circle"></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgcbbe731">
<h2 id="orgcbbe731">Closure, Constants, and Variables</h2>
<div class="outline-text-2" id="text-orgcbbe731">
<p>We begin in the usual way with a variable to hold the <code>div id</code> that the sketch will go into and declaring the function that will hold our sketch tode.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">CIRCLE_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"5fa2c81b-hard-circle"</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">circle_the_hard_way</span><span class="p">(</span><span class="nx">p5</span><span class="p">){</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-orgd997913">
<h3 id="orgd997913">Constants</h3>
<div class="outline-text-3" id="text-orgd997913">
<p>Next I'll declare some constants, both to maybe remind me what the values represent when I use them later and to have a place where I can change the values as I experiment with what looks interesting.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">DEGREES_IN_A_CIRCLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">360</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">RADIUS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">SMALL_DIAMETER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">STEP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">TO_RADIANS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span><span class="o">/</span><span class="w"> </span><span class="nx">DEGREES_IN_A_CIRCLE</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">RADIUS</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">WIDTH</span><span class="p">;</span>
</pre></div>
<ul class="org-ul">
<li>The <code>RADIUS</code> holds the radius of the circle we're going to draw</li>
<li><code>SMALL_DIAMETER</code> holds the diameter of the circles I'm going to use to draw the main circle.</li>
<li><code>STEP</code> holds the number of degrees I'm going to rotate the starting point of the circle every time it's re-drawn</li>
<li><code>WITDH</code> and <code>HEIGHT</code> are the dimensions of the canvas</li>
</ul>
<p>To make it less confusing I'll refer to the small circles that make up the big cicrle as "points" most of the time.</p>
</div>
</div>
<div class="outline-3" id="outline-container-orgdf97d46">
<h3 id="orgdf97d46">Variables</h3>
<div class="outline-text-3" id="text-orgdf97d46">
<p>The variables are:</p>
<ul class="org-ul">
<li><code>center_x</code>, <code>center_y</code>: the center coordinates for the circle. These could be constants but I usually set them in the <code>setup</code>.</li>
<li><code>slider</code>: to hold a slider that will set how many degrees we'll rotate between drawing points on the circle</li>
<li><code>start</code>: the angle at which we'll start drawing the circle.</li>
</ul>
<div class="highlight">
<pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">center_x</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">center_y</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">slider</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org8e35013">
<h2 id="org8e35013">Set Up</h2>
<div class="outline-text-2" id="text-org8e35013">
<p>Our <code>setup</code> function creates the canvas, sets the colors and creates the slider to let the user change how big a jump we take between drawing points on the circle</p>
<div class="highlight">
<pre><span></span><span class="w">  </span><span class="nx">p5</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span><span class="nx">WIDTH</span><span class="p">,</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="s2">"white"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="s2">"black"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">p5</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s2">"black"</span><span class="p">);</span>
<span class="w">    </span><span class="nx">center_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="nx">center_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mf">2</span><span class="p">;</span>
<span class="w">    </span><span class="nx">slider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createSlider</span><span class="p">(</span>
<span class="w">      </span><span class="mf">1</span><span class="p">,</span>
<span class="w">      </span><span class="mf">360</span><span class="p">,</span>
<span class="w">      </span><span class="mf">2</span><span class="p">,</span>
<span class="w">      </span><span class="mf">1</span><span class="p">);</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span><span class="w"> </span><span class="s2">"500px"</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end setup</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgf6de061">
<h2 id="orgf6de061">Draw</h2>
<div class="outline-text-2" id="text-orgf6de061">
<p>The <code>draw</code> function draws a circle using circles and a line showing the raduis.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-org03c2d05">
<h3 id="org03c2d05">Looping Around the Circle</h3>
<div class="outline-text-3" id="text-org03c2d05">
<p>We're going to rotate around the circle once using the <code>start</code> value as the angle to start at and the value the slider's set at for the number of degrees we move between drawing the points on the circle. To make it easier to think about I'm using degrees in the for-loop but the <i>sin</i> and <i>cos</i> functions expect radians so we need to convert the degrees. Since the circumference of a circle is both \(360^\circ\) and \(2\pi\) we can use a straight ratio to convert them.</p>
<p>\[ \textit{radians} = \textit{degrees} \times \frac{2 \pi}{360} \]</p>
<p>This is usually written using a half-circle \(\left(\frac{\pi}{180}\right)\) but I find it easier to remember the whole circle for some reason.</p>
<div class="highlight">
<pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">angle</span><span class="o">=</span><span class="nx">start</span><span class="p">;</span><span class="w"> </span><span class="nx">angle</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">DEGREES_IN_A_CIRCLE</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">start</span><span class="p">;</span>
<span class="w">     </span><span class="nx">angle</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">radians</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">angle</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">TO_RADIANS</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org4ccada4">
<h3 id="org4ccada4">The Coordinates of the Circle's Points</h3>
<div class="outline-text-3" id="text-org4ccada4">
<p>The coordinates for our point are calculated using the trigonometric definitions for <i>sin</i> and <i>cos</i>.</p>
\begin{align} \cos \theta &amp;= \frac{adjacent}{hypotenuse} \\ \textit{adjacent} &amp;= \textit{hypotenuse} \times \cos \theta \end{align} \begin{align} \sin \theta &amp;= \frac{opposite}{hypotenuse}\\ \textit{opposite} &amp;= \textit{hypoteuse} \times \sin \theta \end{align}
<p>Using the <i>radius</i> we want as the <i>hypotenuse</i> and the <i>adjacent</i> and <i>opposite</i> values as the <i>x</i> and <i>y</i> coordinates we can re-write the equations as:</p>
\begin{align} x &amp;= r \cos \theta \\ y &amp;= r \sin \theta \end{align}
<p>But since our coordinate system starts in the top left corner we have to add an offset to move the center of the circle to the center of the canvas.</p>
\begin{align} x &amp;= \textit{center}_x + r \cos \theta \\ y &amp;= \textit{center}_y + r \sin \theta \end{align}
<div class="highlight">
<pre><span></span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">center_x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">RADIUS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
<span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">center_y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">RADIUS</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">radians</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org46b0a50">
<h3 id="org46b0a50">Now We Draw</h3>
<div class="outline-text-3" id="text-org46b0a50">
<p>Now that we have our <i>x</i> and <i>y</i> coordinates for the next point on the circle we can draw it.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5</span><span class="p">.</span><span class="nx">line</span><span class="p">(</span><span class="nx">center_x</span><span class="p">,</span><span class="w"> </span><span class="nx">center_y</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">);</span>
<span class="nx">p5</span><span class="p">.</span><span class="nx">circle</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">SMALL_DIAMETER</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgcfcb54c">
<h3 id="orgcfcb54c">And the Rest</h3>
<div class="outline-text-3" id="text-orgcfcb54c">
<p>If we just draw the points and line we'll end up with a black dot, which still shows that it's working, but kind of negates the point of using something animated, so I'll draw a white background that's mostly transparent so we can see things move.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="mf">255</span><span class="p">,</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
</pre></div>
<p>And now I'll increment the <code>start</code> angle so the next time we draw a circle it will be rotated a little bit from where it started this time through the loop.</p>
<div class="highlight">
<pre><span></span><span class="nx">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">STEP</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">360</span><span class="w"> </span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org7f744e4">
<h2 id="org7f744e4">Closing Up</h2>
<div class="outline-text-2" id="text-org7f744e4">
<p>And there we have the circle. I had two main reasons for doing this exercise - one was to have a starting point for making noisier shapes and the other was to remind myself of how to make cyclical values so that I can use it as input for functions that I want to have repeat themselves.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgdaf1360">
<h2 id="orgdaf1360">References</h2>
<div class="outline-text-2" id="text-orgdaf1360">
<ul class="org-ul">
<li><a href="posts/bibliography-generative-art/">Generative Art</a></li>
<li><a href="posts/bibliography-the-nature-of-code/">The Nature of Code</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/pulling-images-for-the-abecedarium/index.html">Pulling Images For the Abecedarium</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/pulling-images-for-the-abecedarium/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-05-25T15:20:54-07:00" itemprop="datePublished" title="2023-05-25 15:20">2023-05-25 15:20</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org2d02b9c">Imports and Setup</a>
<ul>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgd7bdbcf">Imports</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgbb2e906">Set Up</a></li>
</ul>
</li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org003cea6">Ape</a>
<ul>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org83d353c">A First (Failed Attempt)</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orga6b3a6b">Once Again With icrawler</a></li>
</ul>
</li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org2b10d9b">Bison</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgae177ba">Chimpanzee</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org6ae618c">Cow</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org23d6df9">Dragon</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org80e2ae4">Elephant</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org5e7e7c8">Frog</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org56ad5c3">Goat (Horned)</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org04704e5">Hippo</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgd672c03">Iguana</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org981cb53">Jackrabbit</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org8b2c8cd">Krampus</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org429ea98">Lobster</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgcc7be69">Minotaur</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org9d5fe30">Namahage</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org6746eb2">Octopus</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org52a780f">Pig</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org4ab6b12">Quetzacoatl</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org52ca0d8">Rhinoceros</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org413e173">Samurai</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org28174d3">Tortoise</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org632d4ae">Unicorn (horse)</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org0db595a">Vampire Fish</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org105ead2">Wasp</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org647e7ef">Chicken (Rooster)</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#org210f526">Yak</a></li>
<li><a href="posts/pulling-images-for-the-abecedarium/index.html#orgc938b5d">Zebu</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org2d02b9c">
<h2 id="org2d02b9c">Imports and Setup</h2>
<div class="outline-text-2" id="text-org2d02b9c"></div>
<div class="outline-3" id="outline-container-orgd7bdbcf">
<h3 id="orgd7bdbcf">Imports</h3>
<div class="outline-text-3" id="text-orgd7bdbcf">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">from</span> <span class="nn">google_images_download.google_images_download</span> <span class="kn">import</span> <span class="n">googleimagesdownload</span> <span class="k">as</span> <span class="n">GoogleImages</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgbb2e906">
<h3 id="orgbb2e906">Set Up</h3>
<div class="outline-text-3" id="text-orgbb2e906">
<div class="highlight">
<pre><span></span><span class="n">ENV_PATH</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">"~/projects/ape-iron/.env"</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">ENV_PATH</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span>

<span class="n">load_dotenv</span><span class="p">(</span><span class="n">ENV_PATH</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">OUTPUT</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">"ABECEDARIUM"</span><span class="p">])</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
<span class="n">google_images</span> <span class="o">=</span> <span class="n">GoogleImages</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org003cea6">
<h2 id="org003cea6">Ape</h2>
<div class="outline-text-2" id="text-org003cea6"></div>
<div class="outline-3" id="outline-container-org83d353c">
<h3 id="org83d353c">A First (Failed Attempt)</h3>
<div class="outline-text-3" id="text-org83d353c">
<div class="highlight">
<pre><span></span><span class="n">APE_PATH</span> <span class="o">=</span> <span class="n">OUTPUT</span><span class="o">/</span><span class="s2">"Ape/"</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">keywords</span><span class="o">=</span><span class="s2">"gorilla"</span><span class="p">,</span>
    <span class="n">limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="s2">"photo"</span><span class="p">,</span>
    <span class="n">output_directory</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">APE_PATH</span><span class="p">),</span>
    <span class="n">chromedriver</span><span class="o">=</span><span class="s2">"/usr/bin/chromedriver"</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">paths</span> <span class="o">=</span> <span class="n">google_images</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>
</pre></div>
<pre class="example">

Item no.: 1 --&gt; Item name = pig
Evaluating...
Starting Download...


Unfortunately all 20 could not be downloaded because some images were not downloadable. 0 is all we got for this search filter!

Errors: 0

</pre>
<p>Oops. It looks like the <a href="https://github.com/hardikvasa/google-images-download">google-images-download</a> project has been abandoned and no longer works. There are multiple bug reports for it. One mentions <a href="https://github.com/Joeclinton1/google-images-download">a fork</a> that looks like it has more activity, but <a href="https://github.com/hardikvasa/google-images-download/issues/376">this bug report</a> mentions another project called <a href="https://github.com/hellock/icrawler">icrawler</a>which seems like a more general web-crawler that also says it has a google images downloader so maybe I'll try that instead.</p>
</div>
</div>
<div class="outline-3" id="outline-container-orga6b3a6b">
<h3 id="orga6b3a6b">Once Again With icrawler</h3>
<div class="outline-text-3" id="text-orga6b3a6b">
<div class="highlight">
<pre><span></span><span class="kn">from</span> <span class="nn">icrawler.builtin</span> <span class="kn">import</span> <span class="n">GoogleImageCrawler</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">storage</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">root_dir</span><span class="o">=</span><span class="n">APE_PATH</span><span class="p">)</span>
<span class="n">crawler</span> <span class="o">=</span> <span class="n">GoogleImageCrawler</span><span class="p">(</span><span class="n">storage</span><span class="o">=</span><span class="n">storage</span><span class="p">)</span>
</pre></div>
<p>Besides the keyword (keywords?) you can pass some other arguments. One notable option is a `filters` dictionary that helps specify the type of image.</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" id="orgf4ed7a8" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Key</th>
<th class="org-left" scope="col">Options</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">type</td>
<td class="org-left">“photo”, “face”, “clipart”, “linedrawing”, “animated”</td>
</tr>
<tr>
<td class="org-left">color</td>
<td class="org-left">“color”, “blackandwhite”, “transparent”, “red”, “orange”, “yellow”, “green”</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">“teal”, “blue”, “purple”, “pink”, “white”, “gray”, “black”, “brown”</td>
</tr>
<tr>
<td class="org-left">size</td>
<td class="org-left">“large”, “medium”, “icon”</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">larger than a given size (e.g. “&gt;640x480”)</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">exactly is a given size (“=1024x768”)</td>
</tr>
<tr>
<td class="org-left">license</td>
<td class="org-left">“noncommercial”(labeled for noncommercial reuse)</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">“commercial”(labeled for reuse)</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">“noncommercial,modify”(labeled for noncommercial reuse with modification)</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">“commercial,modify”(labeled for reuse with modification)</td>
</tr>
<tr>
<td class="org-left">date</td>
<td class="org-left">“pastday”, “pastweek”</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">tuple of dates, e.g. ((2016, 1, 1), (2017, 1, 1)) or ((2016, 1, 1), None)</td>
</tr>
</tbody>
</table>
<p>The <a href="https://icrawler.readthedocs.io/en/latest/builtin.html#search-engine-crawlers">icrawler documentation</a> suggests using the date-ranges to get past the 1,000 (or however many) image limit.</p>
<p>The arguments to the `crawl` method are:</p>
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" id="org2715587" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Argument</th>
<th class="org-left" scope="col">Default</th>
<th class="org-left" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">keyword</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">The search term for the images</td>
</tr>
<tr>
<td class="org-left">filters</td>
<td class="org-left">None</td>
<td class="org-left">A dictionary of image filter options (see above)</td>
</tr>
<tr>
<td class="org-left">offset</td>
<td class="org-left">0</td>
<td class="org-left">Where to start in the search (e.g. skip first 10)</td>
</tr>
<tr>
<td class="org-left">max_num</td>
<td class="org-left">1000</td>
<td class="org-left">Maximum number of images to pull (the service will set some limit, usually 1,000)</td>
</tr>
<tr>
<td class="org-left">min_size</td>
<td class="org-left">None</td>
<td class="org-left">Minimum pixel size as a tuple <code>(x-pixels, y-pixels)</code></td>
</tr>
<tr>
<td class="org-left">max_size</td>
<td class="org-left">None</td>
<td class="org-left">Maximum image size as a tuple <code>(x-pixels, y-pixels)</code></td>
</tr>
<tr>
<td class="org-left">language</td>
<td class="org-left">None</td>
<td class="org-left">If you're not using English, I assume</td>
</tr>
<tr>
<td class="org-left">file_idx_offset</td>
<td class="org-left">0</td>
<td class="org-left">icrawler names the downloaded files as numbers, this will be the next number to use</td>
</tr>
</tbody>
</table>
<p>The <a href="https://github.com/hellock/icrawler/blob/master/icrawler/builtin/google.py">code</a> says that you can't set <code>max_num</code> to anything greater than 1,000. I think the <code>offset</code> is the amount to skip within that 1,000. Maybe. The icrawler ignores the names of the files given in the URLs and names them with numbers (e.g. <code>000001.jpg</code>). If you make another crawl and don't want to clobber an earlier set of files you probably need to change the <code>file_idx_offset</code> (I think. I haven't tried it yet).</p>
<p>Let's see what happens if we pull <i>gorilla</i> photos.</p>
<div class="highlight">
<pre><span></span><span class="n">crawler</span><span class="o">.</span><span class="n">crawl</span><span class="p">(</span><span class="n">keyword</span><span class="o">=</span><span class="s2">"gorilla"</span><span class="p">,</span>
              <span class="n">filters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                  <span class="nb">type</span><span class="o">=</span><span class="s2">"photo"</span>
              <span class="p">))</span>
</pre></div>
<pre class="example" id="org3617ee4">
2023-05-29 16:20:21,749 - INFO - icrawler.crawler - start crawling...
2023-05-29 16:20:21,752 - INFO - icrawler.crawler - starting 1 feeder threads...
2023-05-29 16:20:21,756 - INFO - icrawler.crawler - starting 1 parser threads...
2023-05-29 16:20:21,759 - INFO - icrawler.crawler - starting 1 downloader threads...
2023-05-29 16:20:22,776 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=0&amp;start=0&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:20:23,223 - ERROR - downloader - Response status code 404, file https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Gorille_des_plaines_de_l%27ouest_%C3%A0_l%27Espace_Zoologique.jpg
2023-05-29 16:20:23,871 - INFO - downloader - image #1  https://files.worldwildlife.org/wwfcmsprod/images/Mountain_Gorilla_Silverback_WW22557/story_full_width/36fcoamev0_Mountain_Gorilla_Silverback_WW22557.jpg
2023-05-29 16:20:24,774 - INFO - downloader - image #2  https://i.natgeofe.com/n/2d706180-e778-4110-9c15-1a7435b72114/mountain-gorillas-rwanda-02_3x4.jpg
2023-05-29 16:20:25,115 - INFO - downloader - image #3  https://www.nczoo.org/sites/default/files/2020-05/Gorilla-5.jpg
2023-05-29 16:20:25,465 - INFO - downloader - image #4  https://cdn.britannica.com/79/20279-050-ECDF21A7/mountain-gorilla-Virunga-National-Park-Democratic-Republic.jpg
2023-05-29 16:20:25,651 - ERROR - downloader - Response status code 401, file https://optimise2.assets-servd.host/maniacal-finch/production/animals/WL_Gorilla.jpg
2023-05-29 16:20:25,859 - INFO - downloader - image #5  https://media.npr.org/assets/img/2021/10/08/ap21280523738198-1--cc4c958352f2bd1a4a45c203f1f7807fc0193457-s1100-c50.jpg
2023-05-29 16:20:26,463 - INFO - downloader - image #6  https://media-cldnry.s-nbcnews.com/image/upload/rockcms/2022-01/220125-atlanta-zoo-ozzie-male-gorilla-obit-ac-849p-0cdfbe.jpg
2023-05-29 16:20:26,510 - INFO - downloader - image #7  https://files.worldwildlife.org/wwfcmsprod/images/HERO_Mountain_Gorilla_Silverback_WW22557/hero_small/17l7fosr27_Mountain_Gorilla_Silverback_WW22557.jpg
2023-05-29 16:20:27,116 - INFO - downloader - image #8  https://images.immediate.co.uk/production/volatile/sites/23/2014/07/GettyImages-157862378-7432ede.jpg
2023-05-29 16:20:27,314 - INFO - downloader - image #9  https://t4.ftcdn.net/jpg/05/65/55/03/360_F_565550348_QbLFP5eFniY4cGy230zuhGcz0pcG56YC.jpg
2023-05-29 16:20:30,876 - INFO - downloader - image #10 https://www.wwf.org.uk/sites/default/files/styles/hero_m/public/2019-08/mountain_gorilla_Rwanda.jpg
2023-05-29 16:20:31,178 - INFO - downloader - image #11 https://detroitzoo.org/wp-content/uploads/2015/08/Gorilla-Pende.jpg
2023-05-29 16:20:31,792 - INFO - downloader - image #12 https://cbsaustin.com/resources/media/eab965d5-d9d1-4739-90ad-7b029219bd7c-large16x9_ScreenShot20230407at12.47.20PM.png
2023-05-29 16:20:32,583 - INFO - downloader - image #13 https://newschannel20.com/resources/media/eab965d5-d9d1-4739-90ad-7b029219bd7c-large3x4_ScreenShot20230407at12.47.20PM.png
2023-05-29 16:20:33,167 - ERROR - downloader - Response status code 400, file https://th-thumbnailer.cdn-si-edu.com/J_03GIL6RkkkoUYxjX1bZ2uhArg\u003d/1072x720/filters:no_upscale()/https://tf-cmsv2-smithsonianmag-media.s3.amazonaws.com/filer/45/e8/45e81e74-8044-4a89-a679-6d0eaa70d6fc/caters_gorilla_punch_03.jpg
2023-05-29 16:20:33,883 - INFO - downloader - image #14 https://upload.wikimedia.org/wikipedia/commons/5/50/Male_gorilla_in_SF_zoo.jpg
2023-05-29 16:20:34,899 - INFO - downloader - image #15 https://i.natgeofe.com/n/e180e488-e4e1-472d-9d4f-b2138978903c/01-gorilla-stare_4x3.jpg
2023-05-29 16:20:35,491 - INFO - downloader - image #16 https://cdn.britannica.com/79/126579-050-17FD9CF2/lowland-gorilla.jpg
2023-05-29 16:20:36,169 - INFO - downloader - image #17 https://foxchattanooga.com/resources/media/44a66631-49af-4355-ad52-845f43e9411d-pittsburghzoobabygorilla2.png
2023-05-29 16:20:36,550 - INFO - downloader - image #18 https://gorillafund.org/wp-content/uploads/2022/09/Ubwitange.jpg
2023-05-29 16:20:36,964 - INFO - downloader - image #19 https://www.rainforest-alliance.org/wp-content/uploads/2021/06/baby-mountain-gorilla-1.jpg
2023-05-29 16:20:40,643 - INFO - downloader - image #20 https://ichef.bbci.co.uk/news/976/cpsprodpb/2533/production/_119132590_2.60637068.jpg
2023-05-29 16:20:40,986 - INFO - downloader - image #21 https://images.theconversation.com/files/246210/original/file-20181119-76137-1c4570v.jpg
2023-05-29 16:20:41,194 - INFO - downloader - image #22 https://m.media-amazon.com/images/I/81uzcxVyiaL._AC_UF894,1000_QL80_.jpg
2023-05-29 16:20:41,621 - INFO - downloader - image #23 https://zooatlanta.org/wp-content/uploads/gorilla_baby2023_230425_shalia_baby_ZA_2T0A6711.jpg
2023-05-29 16:20:41,878 - ERROR - downloader - Response status code 403, file https://gray-whsv-prod.cdn.arcpublishing.com/resizer/5SrqNB2HFQ5OH7-D5Da0plW2zH4\u003d/1200x675/smart/filters:quality(85)/cloudfront-us-east-1.images.arcpublishing.com/gray/TB36MKZ2ENACBLSWNP6INGD3HA.jpg
2023-05-29 16:20:42,635 - INFO - downloader - image #24 https://ichef.bbci.co.uk/news/976/cpsprodpb/C173/production/_119132594_2.60637064.jpg
2023-05-29 16:20:43,442 - INFO - downloader - image #25 https://www.cmzoo.org/wp-content/uploads/Roxy-1024x680.jpg
2023-05-29 16:20:43,747 - INFO - downloader - image #26 https://media.npr.org/assets/img/2022/01/26/western-lowland-gorilla-ozzie_zoo-atlanta-1b335bebb3e98145cd3216e20b668c617b370a58.jpg
2023-05-29 16:20:44,376 - INFO - downloader - image #27 https://www.columbuszoo.org/sites/default/files/styles/square_large/public/assets/animals/Gorilla%20%28Ktembe%29%2009956%20-%20Grahm%20S.%20Jones%2C%20Columbus%20Zoo%20and%20Aquarium.jpg
2023-05-29 16:20:47,970 - ERROR - downloader - Response status code 500, file https://npr.brightspotcdn.com/dims4/default/4ef2621/2147483647/strip/true/crop/1995x1047+0+117/resize/1200x630!/quality/90/?url\u003dhttp%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2F5e%2F11%2Fe4ca0a63450c8922417ecba1048e%2F20230308-pz2-8574-cpaulselvaggio-web.jpg
2023-05-29 16:20:48,432 - INFO - downloader - image #28 https://i.natgeofe.com/n/8fa82b8d-0110-48d4-9e01-2926d359c784/mountain-gorillas-rwanda-05_square.jpg
2023-05-29 16:20:48,823 - INFO - downloader - image #29 https://assets3.thrillist.com/v1/image/2782161/1020x765/scale;webp\u003dauto;jpeg_quality\u003d60.jpg
2023-05-29 16:20:49,148 - INFO - downloader - image #30 https://www.awf.org/sites/default/files/Website_SpeciesPage_MountainGorilla01_Hero.jpg
2023-05-29 16:20:49,639 - INFO - downloader - image #31 https://www.jsonline.com/gcdn/presto/2022/07/28/PMJS/9508fe0d-e41f-4c90-922a-f738e6254964-GorillaStare2_4k.jpg
2023-05-29 16:20:50,000 - ERROR - downloader - Response status code 403, file https://www.bostonglobe.com/resizer/UdvN4BJ3rNxChcQaeBBvfctPC6k\u003d/arc-anglerfish-arc2-prod-bostonglobe/public/XLLV4FEUWWSBUJGFQCPXXOEOSY.jpg
2023-05-29 16:20:50,418 - INFO - downloader - image #32 https://louisvillezoo.org/wp-content/uploads/2019/06/Kindi.jpg
2023-05-29 16:20:50,991 - INFO - downloader - image #33 https://sdzsafaripark.org/sites/default/files/styles/hero_with_nav_gradient/public/hero/hero-gorilla.jpg
2023-05-29 16:20:51,377 - INFO - downloader - image #34 https://media.11alive.com/assets/WXIA/images/dba319a2-1f5b-475c-abc2-2070f5695624/dba319a2-1f5b-475c-abc2-2070f5695624_1920x1080.jpg
2023-05-29 16:20:51,790 - INFO - downloader - image #35 https://cbsaustin.com/resources/media/8c872d35-142a-497b-8e40-c7318cf731ce-medium16x9_ScreenShot20230407at1.29.59PM.png
2023-05-29 16:20:54,454 - INFO - downloader - image #36 https://1.bp.blogspot.com/-BSQMRiOCqII/YElP3Sr0qUI/AAAAAAAATEo/E2SvBKQFnmEIjywIvw7oZQ4g5jgLChvkwCLcBGAsYHQ/s2048/Zuna%2B4x6%2Bhigh%2Bres.jpg
2023-05-29 16:20:54,771 - INFO - downloader - image #37 https://d21yqjvcoayho7.cloudfront.net/wp-content/uploads/2022/08/31/Mashika1.jpg
2023-05-29 16:20:55,344 - INFO - downloader - image #38 https://media.cnn.com/api/v1/images/stellar/prod/190422153943-gorillas-selfie-virunga-national-park.jpg
2023-05-29 16:20:55,950 - INFO - downloader - image #39 https://whc.vetmed.ucdavis.edu/sites/g/files/dgvnsk5261/files/styles/sf_landscape_16x9/public/images/article/1-infant%20mtn%20gorilla-Katwe%20Group-OCT%2019%20Bwindi-copyright%20Gorilla%20Doctors-compressed.jpg
2023-05-29 16:20:56,185 - INFO - downloader - image #40 https://media.npr.org/assets/img/2018/01/11/pasikanpr-188adc923bb86ae3a69237493c0aa76f70e75a4a-s1100-c50.jpg
2023-05-29 16:20:56,665 - INFO - downloader - image #41 https://images.newscientist.com/wp-content/uploads/2016/07/13163431/lead_whittier20150521001-5.jpg
2023-05-29 16:20:57,702 - INFO - downloader - image #42 https://good-nature-blog-uploads.s3.amazonaws.com/uploads/2018/01/silverback-gorilla-africa-Benjamin_Thomas.jpg
2023-05-29 16:20:58,455 - INFO - downloader - image #43 https://comozooconservatory.org/wp-content/uploads/2023/04/Gorilla-credit-Steve-Solmonson.jpg
2023-05-29 16:20:59,291 - INFO - downloader - image #44 https://nationalzoo.si.edu/sites/default/files/styles/768_scale/public/newsroom/20230527-valschultz-012-gorilla-infant.jpg
2023-05-29 16:20:59,632 - ERROR - downloader - Response status code 400, file https://cdn.theatlantic.com/thumbor/zN3P8Eg5R2KCRWXgbG3B9VUqxB0\u003d/243x0:3243x2250/1200x900/media/img/mt/2016/11/RTR3NO4M/original.jpg
2023-05-29 16:20:59,940 - INFO - downloader - image #45 https://gorillafund.org/wp-content/uploads/2022/05/Silverback-gorilla-Mafunzo-1024x768.jpg
2023-05-29 16:21:00,189 - ERROR - downloader - Response status code 400, file https://people.com/thmb/zJuWJJxNflt35JwcK9ifuDmcHV4\u003d/1500x0/filters:no_upscale():max_bytes(150000):strip_icc():focal(749x0:751x2)/prince-charles-baby-mountain-gorilla-ubwuzuzanye-090222-231cd500ae6a48aab86d28b031c64d1a.jpg
2023-05-29 16:21:00,523 - ERROR - downloader - Response status code 500, file https://ca-times.brightspotcdn.com/dims4/default/dd8d9f5/2147483647/strip/true/crop/5500x2888+0+518/resize/1200x630!/quality/80/?url\u003dhttps%3A%2F%2Fcalifornia-times-brightspot.s3.amazonaws.com%2F6c%2Fb9%2Fc874005242be8d9bab87c9b81f4a%2Fla-zoo-gorilla-94162.jpg
2023-05-29 16:21:00,884 - ERROR - downloader - Response status code 500, file https://ewscripps.brightspotcdn.com/dims4/default/4fe6984/2147483647/strip/true/crop/1230x646+0+84/resize/1200x630!/quality/90/?url\u003dhttp%3A%2F%2Fewscripps-brightspot.s3.amazonaws.com%2Fe2%2F03%2F781609d74315a69123afb278c6b4%2Fscreen-shot-2022-10-10-at-2.08.29%20PM.png
2023-05-29 16:21:01,469 - INFO - downloader - image #46 https://cloudfront-us-east-1.images.arcpublishing.com/advancelocal/ELEEDHM3YVEYZGD5KZNQZS2ZSY.jpg
2023-05-29 16:21:01,892 - INFO - downloader - image #47 https://www.first5la.org/wp-content/uploads/2020/08/baby-gorilla-tuena-3950983001_534.jpg
2023-05-29 16:21:05,250 - INFO - downloader - image #48 https://images.csmonitor.com/csm/2013/03/gorilla.jpg
2023-05-29 16:21:06,130 - INFO - downloader - image #49 https://cdn.hswstatic.com/gif/gorillas.jpg
2023-05-29 16:21:06,905 - INFO - downloader - image #50 https://files.worldwildlife.org/wwfcmsprod/images/mountain_gorilla_tom_deuitch/story_full_width/3tsywpr4hc___Tom_Deuitch.jpg
2023-05-29 16:21:07,576 - INFO - downloader - image #51 https://www.northeastohioparent.com/wp-content/uploads/2022/10/Kayembe-on-Freddy.jpg
2023-05-29 16:21:08,096 - INFO - downloader - image #52 https://media.apenheul.nl/aphl-cache/0/a/a/9/f/5/0aa9f5cdc1936be4e7937b33e6d625c2b46d4eff.jpg
2023-05-29 16:21:08,182 - ERROR - downloader - Response status code 400, file https://people.com/thmb/9KajO2h4En_kPrf_ZstX4qa0tyQ\u003d/1500x0/filters:no_upscale():max_bytes(150000):strip_icc():focal(688x459:690x461)/kiki-the-gorilla-2000-d0450f98d6894f47892c9e8e088aec61.jpg
2023-05-29 16:21:08,512 - INFO - downloader - image #53 https://9b16f79ca967fd0708d1-2713572fef44aa49ec323e813b06d2d9.ssl.cf2.rackcdn.com/1140x_a10-7_cTC/pittsburgh-zoo-gorilla-1681372480.jpg
2023-05-29 16:21:09,233 - INFO - downloader - image #54 https://cdnph.upi.com/ph/st/th/7381444250950/2015/upi/e113f94e3f13ce7e262fd708f10b66e8/v1.5/8-things-you-didnt-know-about-baby-gorillas.jpg
2023-05-29 16:21:09,824 - INFO - downloader - image #55 https://assets-fortworthbusiness-com.s3-accelerate.amazonaws.com/2022/11/baby-gorillajpg-2-scaled.jpg
2023-05-29 16:21:10,084 - ERROR - downloader - Response status code 500, file https://npr.brightspotcdn.com/dims4/default/efcc501/2147483647/strip/true/crop/1200x739+0+124/resize/880x542!/quality/90/?url\u003dhttp%3A%2F%2Fnpr-brightspot.s3.amazonaws.com%2Flegacy%2Fsites%2Fkera%2Ffiles%2F201807%2Fbaby.jpg
2023-05-29 16:21:11,683 - INFO - downloader - image #56 https://images.thdstatic.com/productImages/31840f43-31cb-42c1-94d2-104e9c4ac138/svn/design-toscano-garden-statues-ne110088-44_600.jpg
2023-05-29 16:21:12,344 - INFO - downloader - image #57 https://d.newsweek.com/en/full/2012821/mambie-gorilla.jpg
2023-05-29 16:21:12,793 - INFO - downloader - image #58 https://npr.brightspotcdn.com/legacy/sites/wjct/files/201902/gandai_by_lynde_nunn__1_.jpg
2023-05-29 16:21:14,785 - INFO - downloader - image #59 https://cloudfront-us-east-1.images.arcpublishing.com/bostonglobe/GZCMY47RIA323XUKPTLSPEPAPY.jpg
2023-05-29 16:21:15,175 - INFO - downloader - image #60 https://cbsaustin.com/resources/media/d86faa81-97a5-4cb5-9dbf-6c50944fdf15-medium16x9_ScreenShot20230407at1.58.11PM.png
2023-05-29 16:21:20,475 - ERROR - downloader - Exception caught when downloading file https://dl0.creation.com/articles/p150/c15079/Gorilla.jpg, error: HTTPSConnectionPool(host='dl0.creation.com', port=443): Read timed out. (read timeout=5), remaining retry times: 2
2023-05-29 16:21:20,660 - INFO - downloader - image #61 https://dl0.creation.com/articles/p150/c15079/Gorilla.jpg
2023-05-29 16:21:21,628 - INFO - downloader - image #62 https://i0.wp.com/sitn.hms.harvard.edu/wp-content/uploads/2021/04/Picture1.jpg
2023-05-29 16:21:22,070 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=1&amp;start=100&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:22,321 - INFO - downloader - image #63 https://www.pbs.org/wnet/nature/files/2021/07/amy-reed-XB5E4D-Ipco-unsplash-scaled-e1627330380270.jpg
2023-05-29 16:21:22,687 - INFO - downloader - image #64 https://images.theconversation.com/files/267521/original/file-20190404-131437-psnnwu.jpg
2023-05-29 16:21:22,841 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=2&amp;start=200&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:23,133 - INFO - downloader - image #65 https://assets.rebelmouse.io/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpbWFnZSI6Imh0dHBzOi8vYXNzZXRzLnJibC5tcy8yNjM3OTM0Ny9vcmlnaW4uanBnIiwiZXhwaXJlc19hdCI6MTY5MjY4ODUxMH0.-R0AvhdriipRZSfYTpfq-CFuNPsCRhl6gd0Z9VNrA88/img.jpg
2023-05-29 16:21:23,522 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=3&amp;start=300&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:23,593 - INFO - feeder - thread feeder-001 exit
2023-05-29 16:21:23,930 - INFO - downloader - image #66 https://i0.wp.com/eastafricanjunglesafaris.com/wp-content/uploads/2019/08/Header-1.jpg
2023-05-29 16:21:24,222 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=4&amp;start=400&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:24,998 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=5&amp;start=500&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:25,822 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=6&amp;start=600&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:26,593 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=7&amp;start=700&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:27,387 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=8&amp;start=800&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:28,307 - INFO - parser - parsing result page https://www.google.com/search?q=gorilla&amp;ijn=9&amp;start=900&amp;tbs=itp%3Aphoto&amp;tbm=isch
2023-05-29 16:21:28,932 - INFO - downloader - downloader-001 is waiting for new download tasks
2023-05-29 16:21:30,411 - INFO - parser - no more page urls for thread parser-001 to parse
2023-05-29 16:21:30,412 - INFO - parser - thread parser-001 exit
2023-05-29 16:21:33,934 - INFO - downloader - no more download task for thread downloader-001
2023-05-29 16:21:33,935 - INFO - downloader - thread downloader-001 exit
2023-05-29 16:21:34,776 - INFO - icrawler.crawler - Crawling task done!
</pre>
<div class="highlight">
<pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Downloaded: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">APE_PATH</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<pre class="example">
Downloaded: 66
</pre>
<p>So, even though the default maximum number of images is 1,000, it actually only pulled down 66. There are some error codes in the logger's output, but that seems like a big discrepancy. Oh, well, okay for a first try.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org2b10d9b">
<h2 id="org2b10d9b">Bison</h2>
<div class="outline-text-2" id="text-org2b10d9b">
<p>Looking at the output of the Ape crawl, it looks like it only used one thread per object (i.e. one <code>feeder</code>, one <code>parser</code>, and one <code>downloader</code>. Maybe I'll try and push that up and see what happens.</p>
<div class="highlight">
<pre><span></span><span class="n">BISON_PATH</span> <span class="o">=</span> <span class="n">OUTPUT</span><span class="o">/</span><span class="s2">"Bison"</span>
<span class="n">storage</span><span class="p">[</span><span class="s2">"root_dir"</span><span class="p">]</span> <span class="o">=</span> <span class="n">BISON_PATH</span>

<span class="n">crawler</span> <span class="o">=</span> <span class="n">GoogleImageCrawler</span><span class="p">(</span><span class="n">storage</span><span class="o">=</span><span class="n">storage</span><span class="p">,</span>
                             <span class="n">feeder_threads</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                             <span class="n">parser_threads</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                             <span class="n">downloader_threads</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">filters</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"photo"</span><span class="p">)</span>

<span class="n">crawler</span><span class="o">.</span><span class="n">crawl</span><span class="p">(</span><span class="n">keyword</span><span class="o">=</span><span class="s2">"bison"</span><span class="p">,</span>
              <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">,</span>
              <span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Downloaded: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">BISON_PATH</span><span class="o">.</span><span class="n">iterdir</span><span class="p">())</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<pre class="example">
Downloaded: 97
</pre>
<p>I ran this twice. The first time I got 70 files, then for this run I disconnected the VPN, which seemed to increase the file count a little, but not a lot.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgae177ba">
<h2 id="orgae177ba">Chimpanzee</h2>
<div class="outline-text-2" id="text-orgae177ba">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"chimpanzee"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org6ae618c">
<h2 id="org6ae618c">Cow</h2>
<div class="outline-text-2" id="text-org6ae618c">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="n">keyword</span><span class="p">):</span>
    <span class="n">PATH</span> <span class="o">=</span> <span class="n">OUTPUT</span><span class="o">/</span><span class="n">keyword</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
    <span class="n">crawler</span> <span class="o">=</span> <span class="n">GoogleImageCrawler</span><span class="p">(</span><span class="n">storage</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">root_dir</span><span class="o">=</span><span class="n">PATH</span><span class="p">))</span>
    <span class="n">crawler</span><span class="o">.</span><span class="n">crawl</span><span class="p">(</span><span class="n">keyword</span><span class="o">=</span><span class="n">keyword</span><span class="p">,</span>
                  <span class="n">filters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">"photo"</span><span class="p">))</span>
    <span class="k">return</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"cow"</span><span class="p">)</span>
</pre></div>
<p>Despite putting <code>type=photo</code> in there, the cow output had some drawings in the images, I guess it isn't perfect.</p>
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"cow horned"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org23d6df9">
<h2 id="org23d6df9">Dragon</h2>
<div class="outline-text-2" id="text-org23d6df9">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"dragon temple statue"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org80e2ae4">
<h2 id="org80e2ae4">Elephant</h2>
<div class="outline-text-2" id="text-org80e2ae4">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"elephant"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org5e7e7c8">
<h2 id="org5e7e7c8">Frog</h2>
<div class="outline-text-2" id="text-org5e7e7c8">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"frog"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org56ad5c3">
<h2 id="org56ad5c3">Goat (Horned)</h2>
<div class="outline-text-2" id="text-org56ad5c3">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"goat horned"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org04704e5">
<h2 id="org04704e5">Hippo</h2>
<div class="outline-text-2" id="text-org04704e5">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"hippopotamus"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgd672c03">
<h2 id="orgd672c03">Iguana</h2>
<div class="outline-text-2" id="text-orgd672c03">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"iguana"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org981cb53">
<h2 id="org981cb53">Jackrabbit</h2>
<div class="outline-text-2" id="text-org981cb53">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"jackrabbit"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"antelope american"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org8b2c8cd">
<h2 id="org8b2c8cd">Krampus</h2>
<div class="outline-text-2" id="text-org8b2c8cd">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"krampus mask"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org429ea98">
<h2 id="org429ea98">Lobster</h2>
<div class="outline-text-2" id="text-org429ea98">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"lobster animal"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgcc7be69">
<h2 id="orgcc7be69">Minotaur</h2>
<div class="outline-text-2" id="text-orgcc7be69">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"minotaur statue"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org9d5fe30">
<h2 id="org9d5fe30">Namahage</h2>
<div class="outline-text-2" id="text-org9d5fe30">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"namahage costume"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org6746eb2">
<h2 id="org6746eb2">Octopus</h2>
<div class="outline-text-2" id="text-org6746eb2">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"octopus ocean"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org52a780f">
<h2 id="org52a780f">Pig</h2>
<div class="outline-text-2" id="text-org52a780f">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"pig european adult"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org4ab6b12">
<h2 id="org4ab6b12">Quetzacoatl</h2>
<div class="outline-text-2" id="text-org4ab6b12">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"quetzalcoatl statue"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org52ca0d8">
<h2 id="org52ca0d8">Rhinoceros</h2>
<div class="outline-text-2" id="text-org52ca0d8">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"rhinoceros"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org413e173">
<h2 id="org413e173">Samurai</h2>
<div class="outline-text-2" id="text-org413e173">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"samurai armor"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org28174d3">
<h2 id="org28174d3">Tortoise</h2>
<div class="outline-text-2" id="text-org28174d3">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"tortoise"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org632d4ae">
<h2 id="org632d4ae">Unicorn (horse)</h2>
<div class="outline-text-2" id="text-org632d4ae">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"horse"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org0db595a">
<h2 id="org0db595a">Vampire Fish</h2>
<div class="outline-text-2" id="text-org0db595a">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"vamprie fish -lamprey"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org105ead2">
<h2 id="org105ead2">Wasp</h2>
<div class="outline-text-2" id="text-org105ead2">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"wasp"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org647e7ef">
<h2 id="org647e7ef">Chicken (Rooster)</h2>
<div class="outline-text-2" id="text-org647e7ef">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"rooster"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"x-ray specs"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org210f526">
<h2 id="org210f526">Yak</h2>
<div class="outline-text-2" id="text-org210f526">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"yak"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"uncle sam hat"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc938b5d">
<h2 id="orgc938b5d">Zebu</h2>
<div class="outline-text-2" id="text-orgc938b5d">
<div class="highlight">
<pre><span></span><span class="n">get_images</span><span class="p">(</span><span class="s2">"zebu"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/a-noisy-walker/index.html">A Noisy Walker</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/a-noisy-walker/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-05-10T18:16:09-07:00" itemprop="datePublished" title="2023-05-10 18:16">2023-05-10 18:16</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/a-noisy-walker/index.html#org06509fe">The Noise Walker</a>
<ul>
<li><a href="posts/a-noisy-walker/index.html#org9c5d78d">Noise Value Offset</a></li>
<li><a href="posts/a-noisy-walker/index.html#org3d5f02c">Walk</a></li>
<li><a href="posts/a-noisy-walker/index.html#orgf28ce22">Show Yourself</a></li>
</ul>
</li>
<li><a href="posts/a-noisy-walker/index.html#org4628008">The Sketch</a>
<ul>
<li><a href="posts/a-noisy-walker/index.html#orga6c4036">Set Up</a></li>
<li><a href="posts/a-noisy-walker/index.html#org8145807">Draw</a></li>
</ul>
</li>
<li><a href="posts/a-noisy-walker/index.html#orgc776a51">The End</a></li>
<li><a href="posts/a-noisy-walker/index.html#org7d9b6fe">Sources</a></li>
</ul>
</div>
</div>
<p><b>Note To Viewers At Home:</b> This sketch disturbs my rabbit. Viewer discretion is advised.</p>
<p>
<script src="posts/a-noisy-walker/walker.js"></script>
<script src="posts/a-noisy-walker/sketch.js"></script></p>
<div class="p5js" id="noisy-walker"></div>
<p>This is a follow-up to the <a href="posts/a-random-walker/">Random Walker</a> post. In that previous post I made a walker that moved randomly in any (2D) direction. In this post I'll make a walker that moves according to values given by the p5 <a href="https://p5js.org/reference/#/p5/noise">noise</a> function. This is a pretty straight repeat of what's in the <a href="https://nature-of-code-2nd-edition.netlify.app/introduction/">introduction to the Nature of Code</a>.</p>
<div class="outline-2" id="outline-container-org06509fe">
<h2 id="org06509fe">The Noise Walker</h2>
<div class="outline-text-2" id="text-org06509fe">
<p>The NoiseWalker keeps track of its position on the canvas as well as moving itself and plotting a circle in its current location. Its constructor starts it at the center of the canvas and creates a noise-offset vector to hold the inputs to the noise function. The noise-offset vector is initially given random x and y values so they aren't the same - since <code>noise</code> is a function if we passed in the same value to it for both x and y they would both get the same value out of it and we'd end up with a diagonal line instead of something that looks random-ish the way that we want.</p>
<p>The first call to the <code>walk</code> method will clobber the initial <i>x</i> and <i>y</i> positions so setting it to the center of the canvas isn't really important.</p>
<div class="highlight">
<pre><span></span><span class="cm">/**  a noise-based walker */</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">NoiseWalker</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/** create the Noise Walker</span>
<span class="cm">   * @param: p5 - a p5.js instance</span>
<span class="cm">   * @param: slider - widget to get the amount of noise offset change</span>
<span class="cm">   * @param: stroke_weight: how thick to make the circle line</span>
<span class="cm">   * @param: diameter of the circle</span>
<span class="cm">   * @param: fill_color: color to fill the circle</span>
<span class="cm">   * @param: stroke_color - color for the circle's line</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">({</span><span class="nx">p5</span><span class="p">,</span>
<span class="w">               </span><span class="nx">slider</span><span class="p">,</span>
<span class="w">               </span><span class="nx">stroke_weight</span><span class="o">=</span><span class="mf">1</span><span class="p">,</span>
<span class="w">               </span><span class="nx">diameter</span><span class="o">=</span><span class="mf">24</span><span class="p">,</span>
<span class="w">               </span><span class="nx">fill_color</span><span class="o">=</span><span class="s2">"cornflowerblue"</span><span class="p">,</span>
<span class="w">               </span><span class="nx">stroke_color</span><span class="o">=</span><span class="s2">"black"</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">noise_upper_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10</span><span class="o">**</span><span class="mf">5</span>

<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">slider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">slider</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">stroke_weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stroke_weight</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">diameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">diameter</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">fill_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fill_color</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">stroke_color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">stroke_color</span><span class="p">;</span>

<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createVector</span><span class="p">(</span><span class="nx">p5</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createVector</span><span class="p">(</span><span class="nx">p5</span><span class="p">.</span><span class="nx">random</span><span class="p">(</span><span class="nx">noise_upper_bound</span><span class="p">),</span>
<span class="w">                                        </span><span class="nx">p5</span><span class="p">.</span><span class="nx">random</span><span class="p">(</span><span class="nx">noise_upper_bound</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end constructor</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-org9c5d78d">
<h3 id="org9c5d78d">Noise Value Offset</h3>
<div class="outline-text-3" id="text-org9c5d78d">
<p>This property will return the current value of the slider. It's maybe overkill, but I'm trying to re-learn javascript along with p5 and follow along with <i>The Nature of Code</i> so I need things to be extra-obvious, sometimes.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** getter for amount to add to the noise offset</span>
<span class="cm"> * @returns {number}: amount to add to the noise offset on walking</span>
<span class="cm">*/</span>
<span class="nx">get</span><span class="w"> </span><span class="nx">noise_offset_change</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end get noise_offset_change</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org3d5f02c">
<h3 id="org3d5f02c">Walk</h3>
<div class="outline-text-3" id="text-org3d5f02c">
<p>The <code>walk</code> method moves the walker by adding some noise to its position. The <code>noise</code> function outputs a value from 0 to 1 so I'll use it as a scale factor for the width and height of the canvas to get the new location of the walker. Note that we're not using the prior position of the walker when calculating the new one, just the noise.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** update the position and noise offset */</span>
<span class="nx">walk</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">noise</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">noise</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset_change</span><span class="p">,</span>
<span class="w">                        </span><span class="k">this</span><span class="p">.</span><span class="nx">noise_offset_change</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end walk</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgf28ce22">
<h3 id="orgf28ce22">Show Yourself</h3>
<div class="outline-text-3" id="text-orgf28ce22">
<p>The Noise Walker's <code>show_yourself</code> method draws a circle wherever the walker happens to be at the moment. Nothing fancy.</p>
<div class="highlight">
<pre><span></span><span class="nx">show_yourself</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">strokeWeight</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stroke_weight</span><span class="p">);</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fill_color</span><span class="p">);</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stroke_color</span><span class="p">);</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">circle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">diameter</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end show_yourself</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org4628008">
<h2 id="org4628008">The Sketch</h2>
<div class="outline-text-2" id="text-org4628008">
<p>I'll put the sketch in a function named "noise_walk".</p>
<div class="highlight">
<pre><span></span><span class="nx">NOISY_WALKER_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"noisy-walker"</span><span class="p">;</span>

<span class="cm">/** a sketch to make a circle-drawing walker that moves with noise */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">noise_walk</span><span class="p">(</span><span class="nx">p5js</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">SLIDER_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">500</span><span class="p">;</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">MEDIUM_TEAL_BLUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">89</span><span class="p">,</span><span class="w"> </span><span class="mf">179</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">MEDIUM_TEAL_BLUE_OPAQUE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">color</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">89</span><span class="p">,</span><span class="w"> </span><span class="mf">179</span><span class="p">);</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">walker</span><span class="p">;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">slider</span><span class="p">;</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-orga6c4036">
<h3 id="orga6c4036">Set Up</h3>
<div class="outline-text-3" id="text-orga6c4036">
<p>The <code>setup</code> method will create the canvas, a slider which the user can use to change the size of the steps the walker takes along the noise offset, and the walker itself. The canvas and slider are placed based on the order in which you create them. In this case I wanted the slider underneath the canvas so I had to define it after the canvas (but before the walker since I pass it to the walker).</p>
<div class="highlight">
<pre><span></span><span class="cm">/** setup the canvas, walker, and slider */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">NOISY_WALKER_DIV</span><span class="p">).</span><span class="nx">offsetWidth</span><span class="p">,</span>
<span class="w">    </span><span class="mf">400</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// a slider to let the user change how much the noise is changing</span>
<span class="w">  </span><span class="nx">slider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createSlider</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
<span class="w">  </span><span class="nx">slider</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">SLIDER_WIDTH</span><span class="si">}</span><span class="sb">px`</span><span class="p">);</span>

<span class="w">  </span><span class="nx">walker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">NoiseWalker</span><span class="p">({</span><span class="nx">p5</span><span class="o">:</span><span class="w"> </span><span class="nx">p5js</span><span class="p">,</span>
<span class="w">                            </span><span class="nx">slider</span><span class="o">:</span><span class="w"> </span><span class="nx">slider</span><span class="p">,</span>
<span class="w">                            </span><span class="nx">fill_color</span><span class="o">:</span><span class="nx">MEDIUM_TEAL_BLUE</span><span class="p">});</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="s2">"white"</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end setup</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org8145807">
<h3 id="org8145807">Draw</h3>
<div class="outline-text-3" id="text-org8145807">
<p>The draw function moves and shows the walker.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** move and draw the walker */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">walker</span><span class="p">.</span><span class="nx">walk</span><span class="p">();</span>
<span class="w">  </span><span class="nx">walker</span><span class="p">.</span><span class="nx">show_yourself</span><span class="p">();</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">textSize</span><span class="p">(</span><span class="mf">32</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">textAlign</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">CENTER</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s2">"white"</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">noStroke</span><span class="p">()</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">35</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="nx">MEDIUM_TEAL_BLUE_OPAQUE</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="sb">`Noise Change: </span><span class="si">${</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="p">().</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">            </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end draw</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc776a51">
<h2 id="orgc776a51">The End</h2>
<div class="outline-text-2" id="text-orgc776a51">
<p>And there's the code for the sketch at the top of the page.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org7d9b6fe">
<h2 id="org7d9b6fe">Sources</h2>
<div class="outline-text-2" id="text-org7d9b6fe">
<ul class="org-ul">
<li>Nature of Code [Internet]. [cited 2023 May 11]. Available from: <a href="https://nature-of-code-2nd-edition.netlify.app/">https://nature-of-code-2nd-edition.netlify.app/</a></li>
<li>p5 reference | noise() [Internet]. [cited 2023 Apr 25]. Available from: <a href="https://p5js.org/reference/#/p5/noise">https://p5js.org/reference/#/p5/noise</a></li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/a-random-walker/index.html">A Random Walk(er)</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/a-random-walker/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-05-09T13:07:44-07:00" itemprop="datePublished" title="2023-05-09 13:07">2023-05-09 13:07</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<p>
<script src="posts/a-random-walker/walker.js"></script>
<script src="posts/a-random-walker/sketch.js"></script></p>
<div class="p5js" id="random-walker-sketch"></div>
<p>This is a look at the <a href="https://thecodingtrain.com/tracks/the-nature-of-code-2/noc/1-vectors/1-what-is-a-vector">What Is A Vector</a> lesson on The Coding Train, part of the Nature of Code series. It's used in the series to show how to use vectors instead of object properties (e.g. maintaining and updating <code>this.x</code> and <code>this.y</code>) to hold the position of an object on the canvas.</p>
<p>I'm going to illustrate this by creating an object that takes a <a href="https://en.wikipedia.org/wiki/Random_walk?useskin=vector">random walk</a>.</p>
<div class="outline-2" id="outline-container-org90db340">
<h2 id="org90db340">The Walker</h2>
<div class="outline-text-2" id="text-org90db340">
<p>First up is a Walker class that keeps track of its position on the canvas, updates the position, and draws itself. I'm thinking that drawing itself doesn't seem right, but I suppose since we're only creating one object moving the drawing outside of the class is more work than what's needed.</p>
</div>
<div class="outline-3" id="outline-container-org05c1fee">
<h3 id="org05c1fee">The Constructor</h3>
<div class="outline-text-3" id="text-org05c1fee">
<div class="highlight">
<pre><span></span><span class="cm">/** The Random Walker */</span>
<span class="kd">class</span><span class="w"> </span><span class="nx">Walker</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="cm">/** Create the walker</span>
<span class="cm">   * @param {integer}: x - x-coordinate</span>
<span class="cm">   * @param {integer}: y - y-coordinate</span>
<span class="cm">   * @param {number}: limit - minimum and maximum for the random</span>
<span class="cm">   * @param {integer}: p5 - p5 instance</span>

<span class="cm">   * As a side effect uses x and y to create `this.position`, a vector</span>
<span class="cm">   */</span>
<span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">limit</span><span class="p">,</span><span class="w"> </span><span class="nx">p5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">createVector</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">limit</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end constructor</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgedaff31">
<h3 id="orgedaff31">The Step Property</h3>
<div class="outline-text-3" id="text-orgedaff31">
<p>In the Coding Train video he increments the coordinates of the position vector separately, but since this is supposed to be about vectors I thought it should add another vector. This one was a little bit of a head-scratcher at first, though. <code>p5</code> will make a two-dimensional vector for you with the x and y values set to some random value from -1 to 1 (it's a unit vector set to a random angle) using <a href="https://p5js.org/reference/#/p5.Vector/random2D">p5.Vector.random2D</a>. But the <code>p5</code> we need to use isn't our <code>p5</code> but rather the global p5 object. The <code>p5</code> instance we hold doesn't have the <code>Vector</code> class definition, for some reason (which is why you need to use <code>createVector</code> I guess).</p>
<p>Since the random values are from -1 to 1 I'm multiplying it by a user-specified integer to get a bigger step.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** The next random step</span>
<span class="cm">    @returns: p5.Vector</span>
<span class="cm">*/</span>
<span class="nx">get</span><span class="w"> </span><span class="nx">next_step</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">p5</span><span class="p">.</span><span class="nx">Vector</span><span class="p">.</span><span class="nx">random2D</span><span class="p">().</span><span class="nx">mult</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">limit</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end get next_step</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org6242d38">
<h3 id="org6242d38">The Update Method</h3>
<div class="outline-text-3" id="text-org6242d38">
<p>It would have been nice if p5 vectors could be added using operators, but instead we need to use the <code>add</code> method. Weirdly, <a href="https://p5js.org/reference/#/p5.Vector/add">the Vector.add documentation</a> doesn't cover the case where you pass a vector to another vector's <code>add</code> method, only the cases where you're adding the arguments separately, adding an array of values, or adding two vectors using the <code>p5.Vector.add</code> static method. It appears to do an in-place update, though, so I'll assume that that's what it does.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Add the ~next_step~ vector to the ~position~ vector, updating in-place */</span>
<span class="nx">update</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">next_step</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end update</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org570b35a">
<h3 id="org570b35a">The Show Method</h3>
<div class="outline-text-3" id="text-org570b35a">
<p>This is where the walker draws itself. Even though we're using a vector to hold the position, you still need to unpack the coordinates when calling the <code>point</code> method.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Draw the position as a point */</span>
<span class="nx">show</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">strokeWeight</span><span class="p">(</span><span class="mf">5</span><span class="p">);</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">p5</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end show</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org29f3701">
<h3 id="org29f3701">Move and Show</h3>
<div class="outline-text-3" id="text-org29f3701">
<p>Not really needed, but I'd rather make one function call for the user to move the walker and have it draw itself.</p>
<div class="highlight">
<pre><span></span><span class="cm">/**Convenience method to call ~update~ and ~show~ */</span>
<span class="nx">move_and_show</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
<span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end move_and_show</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org9c34139">
<h2 id="org9c34139">The Sketch</h2>
<div class="outline-text-2" id="text-org9c34139">
<p>Now the sketch. It seems a little awkward, but since the Walker definition is in a separate file from the sketch definition we need to remember add a <code>script</code> tag to the HTML for both of them. I guess you can think of that as the equivalent of an import, although it feels weird somehow.</p>
</div>
<div class="outline-3" id="outline-container-org36d8630">
<h3 id="org36d8630">Some Constants</h3>
<div class="outline-text-3" id="text-org36d8630">
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">WALKER_SKETCH_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"random-walker-sketch"</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">400</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">STEP_LIMIT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WHITE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">255</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org1315a67">
<h3 id="org1315a67">The Sketch Function</h3>
<div class="outline-text-3" id="text-org1315a67">
<p>Nothing fancy here, we're just declaring the function and the <code>walker</code> variable to hold our Walker object.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Sketch of a Random Walk */</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">random_walk</span><span class="p">(</span><span class="nx">p5js</span><span class="p">){</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">walker</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orge2749c6">
<h3 id="orge2749c6">Set Up</h3>
<div class="outline-text-3" id="text-orge2749c6">
<p>Set up the sketch by drawing the canvas and creating a Walker.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Initial setup of the canvas and Walker */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span>
<span class="w">      </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">WALKER_SKETCH_DIV</span><span class="p">).</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="w"> </span><span class="nx">HEIGHT</span><span class="p">);</span>
<span class="w">  </span><span class="nx">walker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Walker</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">STEP_LIMIT</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">);</span>
<span class="w">  </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="nx">WHITE</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// end setup</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org8431479">
<h3 id="org8431479">Draw</h3>
<div class="outline-text-3" id="text-org8431479">
<p>Our <code>draw</code> function defers to the walker to do everything.</p>
<div class="highlight">
<pre><span></span><span class="cm">/** Draw a frame */</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">walker</span><span class="p">.</span><span class="nx">move_and_show</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="c1">// end draw</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgc17c5d7">
<h2 id="orgc17c5d7">The End</h2>
<div class="outline-text-2" id="text-orgc17c5d7">
<p>And there it is. One thing to note is that there's no checking of the position to see if it's wandered off the canvas so it's possible that it will wander completely off and updates won't be visible.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org2f4269a">
<h2 id="org2f4269a">Sources</h2>
<div class="outline-text-2" id="text-org2f4269a"></div>
<div class="outline-3" id="outline-container-org5bedee9">
<h3 id="org5bedee9">The Coding Train</h3>
<div class="outline-text-3" id="text-org5bedee9">
<ul class="org-ul">
<li>What is a Vector? [Internet]. [cited 2023 May 9]. Available from: <a href="https://thecodingtrain.com">https://thecodingtrain.com</a></li>
</ul>
</div>
</div>
<div class="outline-3" id="outline-container-org404440a">
<h3 id="org404440a">P5 Reference</h3>
<div class="outline-text-3" id="text-org404440a">
<ul class="org-ul">
<li>P5 reference | createVector() [Internet]. [cited 2023 May 9]. Available from: <a href="https://p5js.org/reference/#/p5/createVector">https://p5js.org/reference/#/p5/createVector</a></li>
<li>P5 reference | p5.Vector [Internet]. [cited 2023 May 9]. Available from: <a href="https://p5js.org/reference/#/p5.Vector">https://p5js.org/reference/#/p5.Vector</a></li>
</ul>
</div>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/graphing-p5-noise/index.html">Graphing P5 Noise</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/graphing-p5-noise/index.html" rel="bookmark"><time class="published dt-published" datetime="2023-04-24T11:47:11-07:00" itemprop="datePublished" title="2023-04-24 11:47">2023-04-24 11:47</time></a></p>
</div>
</header>
<div class="p-summary entry-summary">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/graphing-p5-noise/index.html#orgef6d1d5">What Is This About?</a></li>
<li><a href="posts/graphing-p5-noise/index.html#orgdb3bf8d">Setup The Sketch</a>
<ul>
<li><a href="posts/graphing-p5-noise/index.html#org8ad9d93">Name The Parent DIV</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org3ea1835">The Instance Container Function</a></li>
</ul>
</li>
<li><a href="posts/graphing-p5-noise/index.html#org2bc23d3">Constants and Variables</a>
<ul>
<li><a href="posts/graphing-p5-noise/index.html#orgd96bf07">The Noise Space</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org0436ad5">The Slider</a></li>
<li><a href="posts/graphing-p5-noise/index.html#orgc57de98">Colors</a></li>
</ul>
</li>
<li><a href="posts/graphing-p5-noise/index.html#org0e1a831">Setup</a>
<ul>
<li><a href="posts/graphing-p5-noise/index.html#org8dbc48c">Canvas and Line</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org2b4df2f">Slider</a></li>
</ul>
</li>
<li><a href="posts/graphing-p5-noise/index.html#org970d74b">Draw</a>
<ul>
<li><a href="posts/graphing-p5-noise/index.html#org08637e7">The Draw Function</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org3ba4781">Setup The Next Frame</a></li>
<li><a href="posts/graphing-p5-noise/index.html#orga823d0a">Plot Next Frame</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org26a1d0a">Move the Noise Input</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org23d68fb">Slider Label</a></li>
<li><a href="posts/graphing-p5-noise/index.html#orgfa4c00c">Once Again But As a Picture</a></li>
</ul>
</li>
<li><a href="posts/graphing-p5-noise/index.html#org6695ab5">Make The Sketch Object</a></li>
<li><a href="posts/graphing-p5-noise/index.html#orgafb6415">And That's It, Then</a></li>
<li><a href="posts/graphing-p5-noise/index.html#org1f0ce6b">Sources</a></li>
</ul>
</div>
</div>
<script language="javascript" src="posts/graphing-p5-noise/noise_graph.js" type="text/javascript"></script>
<div id="noise-graph"></div>
<p>The slider controls how big a step the graph takes along the <code>noise</code> space with each move to the right along the x-axis (moving the slider to the right makes the steps bigger so the line looks noisier).</p>
<div class="outline-2" id="outline-container-orgef6d1d5">
<h2 id="orgef6d1d5">What Is This About?</h2>
<div class="outline-text-2" id="text-orgef6d1d5">
<p>The plot is a visualization of the p5.js <a href="https://p5js.org/reference/#/p5/noise">noise</a> function. I got the idea for it from <a href="https://thecodingtrain.com/tracks/the-nature-of-code-2/noc/perlin/graphing-1d-perlin-noise">the Coding Train</a> but the author of that site explains it by talking about it in a video so I thought I'd re-do it so I can understand what the code is doing a little better. The <a href="https://p5js.org/reference/#/p5/noise">p5 documentation</a> and the <b>Coding Train</b> both describe the <code>noise</code> function as producing <a href="https://en.wikipedia.org/w/index.php?title=Perlin_noise&amp;oldid=1148235423">Perlin noise</a>, and Dan Shiffman (the <b>Coding Train</b> author) even goes on to point out that it's the original version of perlin noise from 1983 and in a later video he shows how to implement <a href="https://en.wikipedia.org/w/index.php?title=Simplex_noise&amp;oldid=1103667712">Simplex Noise</a>, an improved version created by Ken Perlin, the author of the original Perlin Noise. On the github site for Processing, however, there are two issues that claim that processing's <code>noise</code> isn't really <i>perlin</i> noise but rather a form of <a href="https://en.wikipedia.org/w/index.php?title=Value_noise&amp;oldid=1024311499">Value Noise</a>.</p>
<p>I don't know enough to know what's right, so I'll just call it noise or p5's noise and not worry about which it is.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgdb3bf8d">
<h2 id="orgdb3bf8d">Setup The Sketch</h2>
<div class="outline-text-2" id="text-orgdb3bf8d">
<p>Now on to the code. This first section isn't really about plotting the graph but rather about setting up the P5 sketch in the HTML.</p>
</div>
<div class="outline-3" id="outline-container-org8ad9d93">
<h3 id="org8ad9d93">Name The Parent DIV</h3>
<div class="outline-text-3" id="text-org8ad9d93">
<p>We're making a <code>div</code> to stick the sketch into the page so here's the ID we'll use for that <code>div</code> so the code can refer to it.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">NOISE_GRAPH_DIV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"noise-graph"</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org3ea1835">
<h3 id="org3ea1835">The Instance Container Function</h3>
<div class="outline-text-3" id="text-org3ea1835">
<p>To keep all the variables for the sketch contained in its scope we're going to use a function (<code>noise_graph</code>) to act as a closure.</p>
<div class="highlight">
<pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">noise_graph</span><span class="p">(</span><span class="nx">p5js</span><span class="p">){</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org2bc23d3">
<h2 id="org2bc23d3">Constants and Variables</h2>
<div class="outline-text-2" id="text-org2bc23d3">
<p>Now we're into the p5 sketch code (contained within <code>noise_graph</code>). Before defining the <code>setup</code> and <code>draw</code> methods let's define some variables that we can use within them.</p>
</div>
<div class="outline-3" id="outline-container-orgd96bf07">
<h3 id="orgd96bf07">The Noise Space</h3>
<div class="outline-text-3" id="text-orgd96bf07">
<p>The inputs to the <code>noise</code> function are what we'll call the <code>X_NOISE_COORDINATE</code> (or variations on that name, anyway). Every time the canvas gets re-drawn we'll re-draw the graph by putting in a sequence of x-values starting at <code>STARTING_X_NOISE_COORDINATE</code> and incrementing it by <code>X_NOISE_COORDINATE_STEP_SIZE</code> as we move along the x-axis of the canvas.</p>
<div class="highlight">
<pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">X_NOISE_COORDINATE_START</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">X_NOISE_COORDINATE_STEP_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.01</span><span class="p">;</span>
</pre></div>
<p>The <code>X_NOISE_COORDINATE_STEP_SIZE</code> is sort of a re-mapping or re-proportioning of the x-value we use to draw the points for the <code>noise</code> function. The p5 canvas uses integers for the pixel coordinates so as we move across the canvas the x-coordinates are non-negative integers - \(0, 1, 2, \ldots, width - 1\). The <code>noise</code> function, on the other hand, works best with much smaller changes. If you use increments of 1 the output will look pretty much random, while our default of 0.01 will make our plot appear smoother and also show that each point falls reasonably close to the point that just precedes it. So as the x input to the <code>vertex</code> function goes up \(0, 1, 2, \ldots\) we'll increment the input to the <code>noise</code> function as \(0 \times 0.01 = 0, 1 \times 0.01 = 0.01, 2 \times 0.01 = 0.02, \ldots\).</p>
<p><i>But</i> the <code>noise</code> function is, well, a function. If you keep passing in the same value to it you'll get the same value out of it so if we just use a scaled value of the x-coordinate (\(x \times x_{noise-coordinate-step-size}\)) as our input then every time p5 re-draws the sketch it will draw the same graph, producing what looks like a static image. In order to get an animated image we'll add an initial value to the noise input (<code>NOISE-COORDINATE-START</code>) that we'll increment every time we re-start the plot so that the <code>noise</code> function starts with a different value each time we re-draw the graph. So instead of \(x \times x_{noise-coordinate-step-size}\) we use \(x_{noise-coordinate-start} + x \times x_{noise-coordinate-step-size}\) as the input to the <code>noise</code> function.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org0436ad5">
<h3 id="org0436ad5">The Slider</h3>
<div class="outline-text-3" id="text-org0436ad5">
<p>These are some variables so we can add a slider to allow the user to change the step-size to increment the noise input. The slider step size of 0 means that there will be a continuous change in the value as the slider is moved, as opposed to giving it discrete values to jump to.</p>
<div class="highlight">
<pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">MINIMUM_NOISE_COORDINATE_STEP_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">MAXIMUM_NOISE_COORDINATE_STEP_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">SLIDER_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"500px"</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">slider</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">DEFAULT_NOISE_COORDINATE_STEP_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">X_NOISE_COORDINATE_STEP_SIZE</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">SLIDER_STEP_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgc57de98">
<h3 id="orgc57de98">Colors</h3>
<div class="outline-text-3" id="text-orgc57de98">
<p>These are the color settings for the plot.</p>
<div class="highlight">
<pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">BLACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">WHITE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">255</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">OPACITY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">20</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">LINE_COLOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">BLACK</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">BACKGROUND_COLOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">WHITE</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0e1a831">
<h2 id="org0e1a831">Setup</h2>
<div class="outline-text-2" id="text-org0e1a831">
<p>Now we'll monkey-patch the <code>setup</code> function that gets called once at the start of the animation.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-org8dbc48c">
<h3 id="org8dbc48c">Canvas and Line</h3>
<div class="outline-text-3" id="text-org8dbc48c">
<p>The only possibly not-so-obvious thing here should be the <code>document.getElementById(NOISE_GRAPH_DIV).offsetWidth</code> argument to the <code>createCanvas</code> method which grabs the width of the container in which the plot is being put (not the width of the entire window).</p>
<div class="highlight">
<pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createCanvas</span><span class="p">(</span>
<span class="w">  </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">NOISE_GRAPH_DIV</span><span class="p">).</span><span class="nx">offsetWidth</span><span class="p">,</span><span class="w"> </span><span class="mf">400</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="nx">LINE_COLOR</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">noFill</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org2b4df2f">
<h3 id="org2b4df2f">Slider</h3>
<div class="outline-text-3" id="text-org2b4df2f">
<p>Now we'll create the slider to let the user play with the step-size for the noise input.</p>
<div class="highlight">
<pre><span></span><span class="nx">slider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">createSlider</span><span class="p">(</span>
<span class="w">  </span><span class="nx">MINIMUM_NOISE_COORDINATE_STEP_SIZE</span><span class="p">,</span>
<span class="w">  </span><span class="nx">MAXIMUM_NOISE_COORDINATE_STEP_SIZE</span><span class="p">,</span>
<span class="w">  </span><span class="nx">DEFAULT_NOISE_COORDINATE_STEP_SIZE</span><span class="p">,</span>
<span class="w">  </span><span class="nx">SLIDER_STEP_SIZE</span><span class="p">);</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span><span class="w"> </span><span class="nx">SLIDER_WIDTH</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org970d74b">
<h2 id="org970d74b">Draw</h2>
<div class="outline-text-2" id="text-org970d74b">
<p>Here's where we define the <code>draw</code> function that gets called repeatedly to animate our sketch.</p>
</div>
<div class="outline-3" id="outline-container-org08637e7">
<h3 id="org08637e7">The Draw Function</h3>
<div class="outline-text-3" id="text-org08637e7">
<p>Monkey patch the <code>draw</code> method on the <code>p5</code> object.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org3ba4781">
<h3 id="org3ba4781">Setup The Next Frame</h3>
<div class="outline-text-3" id="text-org3ba4781">
<p>We'll paint the canvas with a semi-opaque white on every refresh so that you can sort of see how the graph changes with each loop. We also create some variables:</p>
<ul class="org-ul">
<li><code>noise_step_size</code> is the amount that the <code>x_noise-coordinate</code> changes as the plot moves from left to right along the x-axis of the graph</li>
<li><code>y</code> will be the y-coordinate for the points in our plot</li>
</ul>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">background</span><span class="p">(</span><span class="nx">BACKGROUND_COLOR</span><span class="p">,</span><span class="w"> </span><span class="nx">OPACITY</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">noFill</span><span class="p">();</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">stroke</span><span class="p">(</span><span class="nx">LINE_COLOR</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">noise_step_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="p">();</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">y</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orga823d0a">
<h3 id="orga823d0a">Plot Next Frame</h3>
<div class="outline-text-3" id="text-orga823d0a">
<p>Here's where we plot the graph. We're going to draw the graph using connected line segments so before the loop starts we'll tell p5 to start the shape.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">beginShape</span><span class="p">();</span>
</pre></div>
<p>To draw the graph we'll traverse the canvas from left to right with a for-loop. The <code>x</code> variable in the for-loop corresponds to the x-coordinate in the canvas where we're going to put the next point in our line.</p>
<div class="highlight">
<pre><span></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</pre></div>
<p>Now we'll get the y-coordinate for the point. Since the <code>noise</code> function's output is a float from 0 to 1 we can use it to set the y-coordinate to a fraction of the canvas' height by multiplying \(noise \times height\).</p>
<div class="highlight">
<pre><span></span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">noise</span><span class="p">(</span><span class="nx">X_NOISE_COORDINATE_START</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">noise_step_size</span><span class="p">)</span>
<span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
</pre></div>
<p>Now that we have the x and y coordinates we can draw the next segment by adding a vertex to the shape.</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">vertex</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">);</span>
</pre></div>
<p>That's the end of the for-loop. Now, outside of the loop we call <code>endShape</code> to stop drawing our graph (otherwise it'd draw a line back to the start of the graph the next time we went through the loop).</p>
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">endShape</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org26a1d0a">
<h3 id="org26a1d0a">Move the Noise Input</h3>
<div class="outline-text-3" id="text-org26a1d0a">
<p>Now we'll move the input for the noise function at the start of the graph a little. If we didn't the input to the noise function as we went through the loop would always be the same so our plot would just draw the same thing over and over again (well, if we move the slider to change the <code>noise_step_size</code> it wouldn't be exactly the same, but the starting point would always be the same).</p>
<div class="highlight">
<pre><span></span><span class="nx">X_NOISE_COORDINATE_START</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">noise_step_size</span><span class="p">;</span>
</pre></div>
<p>I'm not showing the closing braces (<code>}</code>) to end the functions but at this point we close the <code>draw</code> and <code>noise_graph</code> functions, ending our definitions for the sketch.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org23d68fb">
<h3 id="org23d68fb">Slider Label</h3>
<div class="outline-text-3" id="text-org23d68fb">
<div class="highlight">
<pre><span></span><span class="nx">p5js</span><span class="p">.</span><span class="nx">textSize</span><span class="p">(</span><span class="mf">32</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">textAlign</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">CENTER</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s2">"white"</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">noStroke</span><span class="p">()</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">rect</span><span class="p">(</span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">35</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="mf">250</span><span class="p">,</span><span class="w"> </span><span class="mf">30</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s2">"black"</span><span class="p">);</span>
<span class="nx">p5js</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="sb">`Noise Change: </span><span class="si">${</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span><span class="p">().</span><span class="nx">toFixed</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<span class="w">            </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mf">2</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">p5js</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">10</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgfa4c00c">
<h3 id="orgfa4c00c">Once Again But As a Picture</h3>
<div class="outline-text-3" id="text-orgfa4c00c">
<p><img alt="for-loop-diagram" src="posts/graphing-p5-noise/noise-for-loop-1250.webp"></p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org6695ab5">
<h2 id="org6695ab5">Make The Sketch Object</h2>
<div class="outline-text-2" id="text-org6695ab5">
<p>Next we pass our sketch definition to <code>p5</code> to build it and attach it to our HTML div.</p>
<div class="highlight">
<pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">p5</span><span class="p">(</span><span class="nx">noise_graph</span><span class="p">,</span><span class="w"> </span><span class="nx">NOISE_GRAPH_DIV</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-orgafb6415">
<h2 id="orgafb6415">And That's It, Then</h2>
<div class="outline-text-2" id="text-orgafb6415">
<p>At this point we should have a graph that helps to visualize how the <code>noise</code> function changes over one-dimension. Noise to the aside, it's also a useful template for plotting any kind of graph, you'd just have to change the setting of the <code>y</code> value to whatever other function you want to visualize.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org1f0ce6b">
<h2 id="org1f0ce6b">Sources</h2>
<div class="outline-text-2" id="text-org1f0ce6b">
<p>P5 Reference:</p>
<ul class="org-ul">
<li>reference | noise() [Internet]. [cited 2023 Apr 25]. Available from: <a href="https://p5js.org/reference/#/p5/noise">https://p5js.org/reference/#/p5/noise</a></li>
<li>reference | beginShape() [Internet]. [cited 2023 Apr 25]. Available from: <a href="https://p5js.org/reference/#/p5/beginShape">https://p5js.org/reference/#/p5/beginShape</a></li>
<li>reference | vertex() [Internet]. [cited 2023 Apr 25]. Available from: <a href="https://p5js.org/reference/#/p5/vertex">https://p5js.org/reference/#/p5/vertex</a></li>
<li>reference | createSlider() [Internet]. [cited 2023 Apr 25]. Available from: <a href="https://p5js.org/reference/#/p5/createSlider">https://p5js.org/reference/#/p5/createSlider</a></li>
</ul>
<p>Wikipedia on Noise:</p>
<ul class="org-ul">
<li>Perlin noise. In: Wikipedia [Internet]. 2023 [cited 2023 Apr 24]. Available from: <a href="https://en.wikipedia.org/w/index.php?title=Perlin_noise&amp;oldid=1148235423">https://en.wikipedia.org/w/index.php?title=Perlin_noise&amp;oldid=1148235423</a></li>
<li>Simplex noise. In: Wikipedia [Internet]. 2022 [cited 2023 Apr 26]. Available from: <a href="https://en.wikipedia.org/w/index.php?title=Simplex_noise&amp;oldid=1103667712">https://en.wikipedia.org/w/index.php?title=Simplex_noise&amp;oldid=1103667712</a></li>
<li>Value noise. In: Wikipedia [Internet]. 2021 [cited 2023 Apr 26]. Available from: <a href="https://en.wikipedia.org/w/index.php?title=Value_noise&amp;oldid=1024311499">https://en.wikipedia.org/w/index.php?title=Value_noise&amp;oldid=1024311499</a></li>
</ul>
<p>The original javascript came from Daniel Shiffman's Coding Train:</p>
<ul class="org-ul">
<li>I.4: Graphing 1D Perlin Noise [Internet]. [cited 2023 Apr 24]. Available from: <a href="https://thecodingtrain.com/tracks/the-nature-of-code-2/noc/perlin/graphing-1d-perlin-noise">https://thecodingtrain.com/tracks/the-nature-of-code-2/noc/perlin/graphing-1d-perlin-noise</a></li>
</ul>
<p>Bugs on the (now deprecated) github processing <b>Issues</b> page pointing out that <code>noise</code> isn't really <i>perlin</i> noise:</p>
<ul class="org-ul">
<li>Real Perlin noise would be nice · Issue #2549 · processing/processing · GitHub [Internet]. [cited 2023 Apr 24]. Available from: <a href="https://github.com/processing/processing/issues/2549">https://github.com/processing/processing/issues/2549</a></li>
<li>Documentation for noise() · Issue #2550 · processing/processing [Internet]. GitHub. [cited 2023 Apr 24]. Available from: <a href="https://github.com/processing/processing/issues/2550">https://github.com/processing/processing/issues/2550</a></li>
</ul>
</div>
</div>
</div>
</article>
</div>
<ul class="pager postindexpager clearfix">
<li class="next"><a href="index-2.html" rel="next">Older posts</a></li>
</ul>
<script crossorigin="anonymous" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">

        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
</script><!--End of body content-->
<footer id="footer">Scribbles by <a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> © 2023 - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<div id="license" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">Ape-Iron</span> is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY-SA 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></div>
</footer>
</div>
<script src="assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script></div>
</body>
</html>
